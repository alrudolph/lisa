{"version":3,"sources":["webpack://my-gatsby-site/./src/components/bivar/map.tsx","webpack://my-gatsby-site/./src/components/bivar/timeline.tsx","webpack://my-gatsby-site/./src/components/bivar/mapView.tsx","webpack://my-gatsby-site/./src/pages/bivar.tsx"],"names":["Container","styled","Title","MapContainer","title","countiesMap","countySelector","highlightedCounty","data","MapSettings","time","weekNum","past","scale","translate","width","height","d3Container","useRef","projection","d3","map_path","useEffect","map_g","current","attr","append","style","selectAll","topojson","objects","states","features","enter","id","Number","counties","on","forEach","d","col","opac","getLast","curr","last","weeks","Math","pow","sel","select","fips","ref","Slider","ButtonArea","convertDate","Date","nextDate","initial","n","getTime","week","setWeek","playing","setPlaying","months","dates","useContext","DatesContext","map","labels","Array","keys","i","filter","getDate","x","domain","length","range","clamp","update","val","find","newDate","endDate","text","getMonth","slider","insert","invert","this","parentNode","appendChild","cloneNode","call","interrupt","event","onClick","MapView","selectedCounty","setSelectedCounty","setTime","useState","setPast","LisaContext","mapData","mapTitles","timer","setInterval","clearInterval","key","type","name","value","onChange","htmlFor"],"mappings":"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","file":"component---src-pages-bivar-tsx-fb94e8fc5449805c0e16.js","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport Sparse from \"../../utility/sparse\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  margin: 10px;\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n`;\n\nconst MapContainer = styled.svg`\n  g {\n    background-color: light-gray;\n    fill: red;\n  }\n  border: 1px solid black;\n\n  .cboundary {\n    stroke-width: 0px;\n  }\n`;\n\ntype MapData = Array<Sparse>;\n\ntype MapSettings = {\n    width: number;\n    height: number;\n    translate: [number, number];\n    scale: number;\n  };\n\ninterface Props {\n  title: string;\n  countiesMap: any;\n  highlightedCounty: [number, string];\n  countySelector: ([s, s1]: [number, string]) => void;\n  data: MapData;\n  time: [number, number];\n  MapSettings: MapSettings;\n  weekNum: number;\n  past: boolean;\n}\n\nconst Map = ({\n  title,\n  countiesMap,\n  highlightedCounty,\n  countySelector,\n  data,\n  time,\n  MapSettings,\n  weekNum,\n  past\n}: Props) => {\n\n    const { scale, translate, width, height } = MapSettings\n\n    const d3Container = useRef(null);\n\n    const projection = d3.geoAlbers().scale(scale).translate(translate);\n    const map_path = d3.geoPath().projection(projection);\n  \n    useEffect(() => {\n        const map_g = d3\n        .select(d3Container.current)\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .append(\"g\");\n  \n      // States:\n      map_g\n        .append(\"g\")\n        .style(\"stroke\", \"black\")\n        .style(\"stroke-width\", \"0.5px\")\n        .style(\"fill\", \"#ffffffff\")\n        .selectAll(\"path\")\n        .data(topojson.feature(countiesMap, countiesMap.objects.states).features)\n        .enter()\n        .append(\"path\")\n        .attr(\"d\", map_path as any)\n        .attr(\"stateFips\", ({ id }) => Number(id));\n  \n      // Counties:\n      map_g\n        .append(\"g\")\n        .selectAll(\"path\")\n        .data(\n          topojson.feature(countiesMap, countiesMap.objects.counties).features\n        )\n        .enter()\n        .append(\"path\")\n        .attr(\"d\", map_path as any)\n        .attr(\"id\", ({ id }) => `c${Number(id)}`)\n        //   .attr(\"countyName\", ({ properties: { name } }) => name)\n        .attr(\"class\", \"cboundary\")\n        .style(\"fill\", \"#00000000\")\n        .on(\"mouseout\", () => {\n          countySelector([-1, \"\"]);\n        });\n    }, [])\n    \n    useEffect(() => {\n        data.forEach(d => {\n            const { curr, last, weeks } = d.getLast(weekNum);\n\n            let col, opac;\n\n            if (curr && curr !== 0) {\n                col = curr === 1 ? \"#ff0000\" : \"#0000ff\"\n                opac = 1\n            }\n            else { \n                col = \"#00000000\"\n                if (last === 1) {\n                    col = \"#ff0000\"\n                }\n                else if (last === 2) {\n                    col = \"#0000ff\"\n                }\n                 opac = past ? ((last > 0 && weeks > 0) ? Math.pow(4, -weeks) : 0) : 0\n            }\n\n            const sel = d3.select(d3Container.current).select(`#c${d.fips}`)\n            sel.style(\"fill\", col)\n            sel.style(\"fill-opacity\", opac)\n        })\n\n    }, [weekNum, past])\n\n    return (\n        <Container>\n          <Title>{title}</Title>\n          <MapContainer ref={d3Container} />\n        </Container>\n      );\n\n};\n\nexport default Map;\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\nimport { DatesContext } from \"../../contexts/datesContext\";\n\nconst Container = styled.div`\n  width: 700px;\n  height: 150px;\n`;\n\nconst Slider = styled.svg`\n  width: 100%;\n  height: 90px;\n`;\n\nconst ButtonArea = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: center;\n\n  * {\n    margin: 20px;\n  }\n`;\n\ntype Props = {\n  week: number;\n  setWeek: (number) => void;\n  playing: boolean;\n  setPlaying: (b: boolean) => void;\n};\n\nconst convertDate = (d: string): Date => {\n  return new Date(`${d} PST`);\n};\n\nconst nextDate = (initial: Date, n: number) => {\n  // return new Date(\n  //   initial.getFullYear(),\n  //   initial.getMonth(),\n  //   initial.getDate() + n\n  // );\n\n  return new Date(initial.getTime() + 24 * 60 * 60 * 1000 * n);\n};\n\nconst TimeLine = ({ week, setWeek, playing, setPlaying }: Props) => {\n  const months = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n\n  const dates = useContext(DatesContext).map((d) => convertDate(d));\n\n  // 2020 was a leap year...\n  const labels = [...Array(365).keys()]\n    .map((i) => {\n      return { d: nextDate(dates[0], i), i };\n    })\n    .filter(({ d }) => {\n      return d.getDate() === 1;\n    });\n\n  const d3Container = useRef(null);\n\n  const x = d3\n    .scaleTime()\n    .domain([dates[0], dates[dates.length - 1]])\n    .range([0, 600])\n    .clamp(true);\n\n  const update = (val: Date | number) => {\n    let i: number;\n\n    if (val instanceof Date) {\n      i = [...Array(dates.length).keys()].find((i) => {\n        return (\n          dates[i] > val ||\n          i === dates.length - 1 ||\n          (dates[i] >= val && i === 0)\n        );\n      });\n      setWeek(i);\n    } else {\n      i = val;\n    }\n\n    const newDate = dates[i];\n    const endDate =\n      i + 1 < dates.length\n        ? nextDate(dates[i + 1], -1)\n        : convertDate(\"2020-12-27\");\n\n    d3.select(d3Container.current).select(\"#handle\").attr(\"cx\", x(newDate));\n    d3.select(d3Container.current)\n      .select(\"#label\")\n      .attr(\"x\", x(newDate))\n      .text(\n        `${newDate.getMonth() + 1}/${newDate.getDate()} - ${\n          endDate.getMonth() + 1\n        }/${endDate.getDate()}`\n      );\n  };\n\n  useEffect(() => {\n    const svg = d3\n      .select(d3Container.current)\n      .append(\"svg\")\n      .attr(\"width\", 700)\n      .attr(\"height\", 100);\n\n    const slider = svg.append(\"g\").attr(\"transform\", \"translate(55, 50)\");\n\n    slider\n      .insert(\"g\")\n      .selectAll(\"text\")\n      .data(labels)\n      .enter()\n      .append(\"text\")\n      .attr(\"x\", ({ d }) => x(d))\n      .attr(\"y\", 30)\n      .attr(\"text-anchor\", \"middle\")\n      .text(({ d }) => months[d.getMonth()]);\n\n    slider\n      .append(\"text\")\n      .attr(\"x\", x(x.invert(600)))\n      .attr(\"y\", 30)\n      .text(\"2020\");\n\n    const handle = slider.insert(\"circle\").attr(\"id\", \"handle\").attr(\"r\", 9);\n\n    const label = slider\n      .append(\"text\")\n      .attr(\"id\", \"label\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", \"translate(0,-15)\");\n\n    slider\n      .append(\"line\")\n      .attr(\"stroke\", \"black\")\n      .attr(\"stroke-width\", \"10px\")\n      .attr(\"stroke-opacity\", 0.3)\n      .attr(\"stroke-linecap\", \"round\")\n      .attr(\"x1\", x.range()[0])\n      .attr(\"x2\", x.range()[1])\n      .select(function () {\n        return this.parentNode.appendChild(this.cloneNode(true));\n      })\n      .attr(\"stroke-width\", \"100px\") // want this to overlap the text\n      .attr(\"stroke\", \"transparent\")\n      .call(\n        d3\n          .drag()\n          .on(\"start.interrupt\", () => slider.interrupt())\n          .on(\"start drag\", (event) => {\n            setPlaying(false);\n            update(x.invert(event.x));\n          })\n      );\n  }, []);\n\n  useEffect(() => {\n    update(week);\n  }, [week]);\n\n  return (\n    <Container>\n      <Slider ref={d3Container} />\n      <ButtonArea>\n        <button\n          onClick={() => {\n            if (week > 0) {\n              setWeek(week - 1);\n            }\n            setPlaying(false);\n          }}\n        >\n          Prev\n        </button>\n        <button\n          onClick={() => {\n            setPlaying(!playing);\n          }}\n        >\n          {playing ? \"Pause\" : \"Play\"}\n        </button>\n        <button\n          onClick={() => {\n            if (week < 51) {\n              setWeek(week + 1);\n            }\n            setPlaying(false);\n          }}\n        >\n          Next\n        </button>\n      </ButtonArea>\n    </Container>\n  );\n};\n\nexport default TimeLine;\n","import React, { useEffect, useContext, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\nimport counties from \"us-atlas/counties-10m.json\";\n\nimport { LisaContext } from \"../../contexts/lisaContext\";\nimport Sparse from \"../../utility/sparse\";\nimport Map from \"./map\";\nimport TimeLine from \"./timeline\";\n\ntype Data = Array<Sparse>;\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ntype Props = {\n  selectedCounty: [number, string];\n  setSelectedCounty: ([s1, s2]: [number, string]) => void;\n  MapSettings: MapSettings;\n  time: [number, number];\n  setTime: ([n1, n2]: [number, number]) => void;\n  week: number;\n  setWeek: (n: number) => void;\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  width: 100px;\n  white-space: nowrap;\n`;\nconst MapContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  flex-wrap: wrap;\n\n  @media (max-width: 770px) {\n    flex-wrap: wrap;\n  }\n`;\nexport default function MapView({\n  selectedCounty,\n  setSelectedCounty,\n  MapSettings,\n  time,\n  setTime,\n  week,\n  setWeek,\n}: Props) {\n  const [past, setPast] = useState(false);\n\n  const { mapData, mapTitles } = useContext(LisaContext);\n\n  const [playing, setPlaying] = useState(false);\n\n  useEffect(() => {\n    if (!playing) {\n      return;\n    }\n\n    const timer = setInterval(() => {\n      if (week < 51) {\n        setWeek(week + 1);\n      }\n    }, 500);\n    return () => clearInterval(timer);\n  }, [playing, week]);\n\n  return (\n    <Container>\n      <MapContainer>\n        {mapTitles.map((title, i) => {\n          return (\n            <Map\n              key={i}\n              title={title}\n              countiesMap={counties}\n              highlightedCounty={selectedCounty}\n              countySelector={setSelectedCounty}\n              time={time}\n              data={mapData ? mapData[i] : null}\n              weekNum={week}\n              MapSettings={MapSettings}\n              past={past}\n            />\n          );\n        })}\n      </MapContainer>\n      <TimeLine\n        week={week}\n        setWeek={setWeek}\n        playing={playing}\n        setPlaying={setPlaying}\n      />\n      <div>\n        <form>\n          <input\n            type=\"checkbox\"\n            id=\"1\"\n            name=\"here\"\n            value=\"sad\"\n            onChange={() => setPast(!past)}\n          ></input>\n          <label htmlFor=\"1\">Show Past Values</label>\n        </form>\n      </div>\n    </Container>\n  );\n}\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport Page from \"../components/page\";\nimport MapView from \"../components/bivar/mapView\";\nimport { DatesContext } from \"../contexts/datesContext\"\n\nimport Sparse from \"../utility/sparse\";\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst width = 380;\nconst height = 250;\nconst mapsTranslate: [number, number] = [width / 2, height / 2];\nconst mapsScale = 500;\n\nconst MapSettings = {\n  width,\n  height,\n  translate: mapsTranslate,\n  scale: mapsScale,\n};\n\nconst Bivariate = () => {\n  const [selectedCounty, setSelectedCounty] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  const [time, setTime] = useState<[number, number]>([0, 52]);\n\n  const [week, setWeek] = useState(0);\n\n  return (\n    <Page>\n      <Container>\n        {/*<p>Week of {dates[week]}</p>*/}\n          <MapView\n            MapSettings={MapSettings}\n            selectedCounty={selectedCounty}\n            setSelectedCounty={setSelectedCounty}\n            time={time}\n            setTime={setTime}\n            week={week}\n            setWeek={setWeek}\n          />\n      </Container>\n    </Page>\n  );\n};\n\nexport default Bivariate;\n"],"sourceRoot":""}