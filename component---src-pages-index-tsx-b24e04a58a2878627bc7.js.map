{"version":3,"sources":["webpack://my-gatsby-site/./src/contexts/mapsContext.tsx","webpack://my-gatsby-site/./src/components/index/centerMap.tsx","webpack://my-gatsby-site/./src/components/index/valueMap.tsx","webpack://my-gatsby-site/./src/pages/index.tsx"],"names":["MapsContext","createContext","Maps","children","states","topojson","countiesMap","features","counties","Provider","value","Container","styled","Map","showFDR","edges","useStaticQuery","allUtahExampleCsv","translate","width","height","d3Container","useRef","useContext","useEffect","projection","d3","scale","map_path","current","attr","append","selectAll","data","filter","id","Math","floor","enter","Number","style","node","find","fips","class","transition","duration","ref","blues","sheltered_in_place_7days_rolling_avg","TextContainer","Text","useState","setShowFDR","window","addEventListener","scrollY","selectedPage"],"mappings":"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","file":"component---src-pages-index-tsx-b24e04a58a2878627bc7.js","sourcesContent":["import React, { createContext } from \"react\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport countiesMap from \"us-atlas/counties-10m.json\";\n\nexport const MapsContext = createContext(null);\n\nexport const Maps = ({ children }) => {\n\n  const states = topojson.feature(countiesMap, countiesMap.objects.states).features\n  const counties = topojson.feature(countiesMap, countiesMap.objects.counties).features\n\n  return (\n    <MapsContext.Provider value={{ states, counties }}>\n      {children}\n    </MapsContext.Provider>\n  );\n};\n","import React, { useRef, useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { graphql, useStaticQuery } from \"gatsby\";\n\nimport * as d3 from \"d3\";\n\nimport { MapsContext } from \"../../contexts/mapsContext\";\n\nconst Container = styled.div``;\n\nconst Map = styled.svg`\n  width: 260px;\n  height: 320px;\n`;\n\ntype Props = {\n  showFDR: boolean;\n};\n\nconst CenterMap = ({ showFDR }: Props) => {\n  const {\n    allUtahExampleCsv: { edges },\n  } = useStaticQuery(graphql`\n    query CenterMapQuery {\n      allUtahExampleCsv {\n        edges {\n          node {\n            class\n            fips\n          }\n        }\n      }\n    }\n  `);\n\n  const width = 260;\n  const height = 320;\n  const translate: [number, number] = [width * 2 + 210, (height * 13) / 16];\n  const scale = 3000;\n\n  const d3Container = useRef(null);\n\n  const { counties } = useContext(MapsContext);\n\n  useEffect(() => {\n    const projection = d3.geoAlbers().scale(scale).translate(translate);\n    const map_path = d3.geoPath().projection(projection);\n\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties.filter(({ id }) => Math.floor(id / 1000) == 49))\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      // .style(\"stroke-width\", 0)\n      .style(\"stroke\", \"#D3D3D3\")\n      .style(\"fill\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips)\n        );\n        return Number(node.class) === 0 ? \"#FFFFFF00\" : \"#5768ac\";\n      })\n      .style(\"fill-opacity\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips) // have to convert to numbers for decimal\n        );\n        return node.class !== \"0\" ? 0.5 : 0\n      });\n  }, []);\n\n  useEffect(() => {\n    d3.select(d3Container.current)\n      .selectAll(\".cboundary\")\n      .transition()\n      .duration(1000)\n      .style(\"fill-opacity\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips) // have to convert to numbers for decimal\n        );\n        return showFDR\n          ? [0, 0.5, 1][Number(node.class) / 2]\n          : Number(node.class !== \"0\") * 0.5;\n      });\n  }, [showFDR]);\n\n  return (\n    <Container>\n      <Map ref={d3Container} />\n      <p>Utah FDR and Simulated cold spot</p>\n    </Container>\n  );\n};\n\nexport default CenterMap;\n","import React, { useRef, useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { graphql, useStaticQuery } from \"gatsby\";\n\nimport * as d3 from \"d3\";\n\nimport { MapsContext } from \"../../contexts/mapsContext\";\n\nconst Container = styled.div`\n`;\n\nconst Map = styled.svg`\n  width: 260px;\n  height: 320px;\n`;\n\nconst ValueMap = () => {\n  const {\n    allUtahExampleCsv: { edges },\n  } = useStaticQuery(graphql`\n    query ValueMapQuery {\n      allUtahExampleCsv {\n        edges {\n          node {\n            sheltered_in_place_7days_rolling_avg\n            fips\n          }\n        }\n      }\n    }\n  `);\n\n  const width = 260;\n  const height = 320;\n  const translate: [number, number] = [width * 2 + 210, (height * 13) / 16];\n  const scale = 3000;\n\n  const d3Container = useRef(null);\n\n  const { counties } = useContext(MapsContext);\n\n    const blues = d3.scaleSequentialPow(d3.interpolateBlues)\n\n  useEffect(() => {\n    const projection = d3.geoAlbers().scale(scale).translate(translate);\n    const map_path = d3.geoPath().projection(projection);\n\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties.filter(({ id }) => Math.floor(id / 1000) == 49))\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      // .style(\"stroke-width\", 0)\n      .style(\"stroke\", \"#D3D3D3\")\n      .style(\"fill\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips)\n        );\n        return blues(1 - (node.sheltered_in_place_7days_rolling_avg - 28) / 20)\n      })\n  }, []);\n\n  return (\n    <Container>\n      <Map ref={d3Container} />\n      <p>Utah Raw values</p>\n    </Container>\n  );\n};\n\nexport default ValueMap;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"gatsby\";\n\nimport Page from \"../components/page\";\nimport CenterMap from \"../components/index/centerMap\";\nimport ValueMap from \"../components/index/valueMap\";\nimport { Maps } from \"../contexts/mapsContext\";\n{\n  /* <Trivariate\n      data={[\n        format(cue_mobility),\n        format(cue_sheltered),\n        format(safe_mobility),\n        format(safe_sheltered),\n      ]}\n    /> */\n}\n\nimport dates from \"../data/dates.json\";\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 100%;\n\n  & > h1 {\n    margin: 10px 5px 0 5px;\n  }\n`;\n\nconst Text = styled.p`\n  margin: 0 5px;\n`;\n\nconst Index = () => {\n  const [showFDR, setShowFDR] = useState(false);\n\n  useEffect(() => {\n    if (typeof window !== `undefined`) {\n      window.addEventListener(\"scroll\", () => {\n        return setShowFDR(window.scrollY > 120);\n      });\n    }\n  }, []);\n\n  return (\n    <Page selectedPage=\"About\">\n      <TextContainer>\n        <h1>About This Website</h1>\n        <Text>What this is showing and stuff</Text>\n        <h1>Data</h1>\n        <Text>The Data we have</Text>\n        <h1>Global Moran</h1>\n        <Text>We see spatial clustering every week</Text>\n        <h1>LISA</h1>\n        <Maps>\n          <ValueMap />\n          <CenterMap showFDR={showFDR} />\n        </Maps>\n        {/* \n        <Text>The about page is still under construction. Please see one of the individual visualization pages.</Text>\n        <ul>\n          <li><Link to=\"/animated\"><h2>Animated Choropleth Maps</h2></Link></li>\n          <li><Link to=\"/static\"><h2>Static Choropleth Maps</h2></Link></li>\n          <li><Link to=\"/scatter\"><h2>Scatter Plot Representations</h2></Link></li>\n        </ul>*/}\n      </TextContainer>\n    </Page>\n  );\n};\n\nexport default Index;\n"],"sourceRoot":""}