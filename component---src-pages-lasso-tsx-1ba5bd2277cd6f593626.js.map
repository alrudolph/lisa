{"version":3,"sources":["webpack://my-gatsby-site/./src/components/lasso/map.tsx","webpack://my-gatsby-site/./src/pages/lasso.tsx"],"names":["Container","styled","Title","MapContainer","MapSettings","width","height","translate","scale","useContext","LisaContext","mapData","mapTitles","data","title","d3Container","useRef","projection","d3","map_path","useEffect","map_g","current","attr","append","style","selectAll","topojson","countiesMap","features","enter","id","Number","fips","properties","name","county_path","datum","centroid","d","get","ref"],"mappings":"2OAWMA,EAAYC,oBAAH,yDAAGA,CAAH,wEAQTC,EAAQD,mBAAH,qDAAGA,CAAH,eAILE,EAAeF,oBAAH,4DAAGA,CAAH,yIA4GlB,EAhFY,SAAC,GAA2B,IAAzBG,EAAyB,EAAzBA,YACLC,EAAoCD,EAApCC,MAAOC,EAA6BF,EAA7BE,OAAQC,EAAqBH,EAArBG,UAAWC,EAAUJ,EAAVI,MADI,GAGPC,gBAAWC,KAAlCC,EAH8B,EAG9BA,QAASC,EAHqB,EAGrBA,UAEXC,EAAOF,EAAQ,GACfG,EAAQF,EAAU,GAElBG,GAAcC,YAAO,MAErBC,EAAaC,QAAeV,MAAMA,GAAOD,UAAUA,GACnDY,EAAWD,QAAaD,WAAWA,GA6DzC,OA3DAG,gBAAU,WACR,IAAMC,EAAQH,KACJH,EAAYO,SACnBC,KAAK,QAASlB,GACdkB,KAAK,SAAUjB,GACfkB,OAAO,KAGVH,EACGG,OAAO,KACPC,MAAM,SAAU,SAChBA,MAAM,eAAgB,SACtBA,MAAM,OAAQ,aACdC,UAAU,QACVb,KAAKc,KAAiBC,EAAaA,kBAA4BC,UAC/DC,QACAN,OAAO,QACPD,KAAK,IAAKJ,GACVI,KAAK,aAAa,gBAAGQ,EAAH,EAAGA,GAAH,OAAYC,OAAOD,MAGxCV,EACGG,OAAO,KACPE,UAAU,QACVb,KACCc,KAAiBC,EAAaA,oBAA8BC,UAE7DC,QACAN,OAAO,QACPD,KAAK,IAAKJ,GACVI,KAAK,MAAM,gBAAGQ,EAAH,EAAGA,GAAH,UAAgBC,OAAOD,MAElCR,KAAK,QAAS,aAGjBF,EACGK,UAAU,UACVb,KAAKA,GACLiB,QACAN,OAAO,UACPD,KAAK,QAAS,UAKdA,KAAK,cAAc,YAAc,IAAXU,EAAW,EAAXA,KACrB,OAAOL,sCAA+C,YAAY,IAATG,EAAS,EAATA,GACvD,OAAOE,IAASD,OAAOD,MACtB,GAAGG,WAAWC,QAElBZ,KAAK,aAAa,YAAc,IAAXU,EAAW,EAAXA,KACdG,EAAclB,KAAA,KAAee,GAAQI,QAC3C,mBAAoBlB,EAASmB,SAASF,GAAtC,OAEDb,KAAK,KAAK,SAACgB,GACR,OAAoB,IAAbA,EAAEC,IAAI,GAAW,EAAI,OAEjC,IAGD,gBAACxC,EAAD,KACE,gBAACE,EAAD,KAAQY,GACR,gBAACX,EAAD,CAAcsC,IAAK1B,MCxHnBf,EAAYC,oBAAH,wDAAGA,CAAH,qDA6Bf,EAvBc,WAEV,IAKMG,EAAc,CAClBC,MANY,IAOZC,OANa,IAObC,UANsC,CAACF,IAAWC,KAOlDE,MANgBF,KASlB,OACI,gBAAC,IAAD,KACI,gBAAC,EAAD,KACI,gBAAC,EAAD,CAAKF,YAAaA","file":"component---src-pages-lasso-tsx-1ba5bd2277cd6f593626.js","sourcesContent":["import React, { useRef, useEffect, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\nimport countiesMap from \"us-atlas/counties-10m.json\";\n\nimport MapZoom from \"../../utility/mapZoom\";\nimport Sparse from \"../../utility/sparse\";\nimport { LisaContext } from \"../../contexts/lisaContext\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  margin: 10px;\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n`;\n\nconst MapContainer = styled.svg`\n  g {\n    background-color: light-gray;\n    fill: red;\n  }\n  border: 1px solid black;\n\n  .cboundary {\n    stroke-width: 0px;\n    fill: #ffffff00;\n  }\n\n  .bubble {\n    stroke-width: 0;\n  }\n`;\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ninterface Props {\n  MapSettings: MapSettings;\n}\n\nconst Map = ({ MapSettings }: Props) => {\n  const { width, height, translate, scale } = MapSettings;\n\n  const { mapData, mapTitles } = useContext(LisaContext);\n\n  const data = mapData[0];\n  const title = mapTitles[0];\n\n  const d3Container = useRef(null);\n\n  const projection = d3.geoAlbers().scale(scale).translate(translate);\n  const map_path = d3.geoPath().projection(projection);\n\n  useEffect(() => {\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    // States:\n    map_g\n      .append(\"g\")\n      .style(\"stroke\", \"black\")\n      .style(\"stroke-width\", \"0.5px\")\n      .style(\"fill\", \"#ffffffff\")\n      .selectAll(\"path\")\n      .data(topojson.feature(countiesMap, countiesMap.objects.states).features)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateFips\", ({ id }) => Number(id));\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(\n        topojson.feature(countiesMap, countiesMap.objects.counties).features\n      )\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\");\n\n    // County Circles:\n    map_g\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"bubble\")\n      /* \n        HAVE TO LOAD COUNTY AND STATE NAME TO BUBBLES HERE:\n          MAYBE PUT THOSE AS SPARSE VECTOR INFO\n      */\n      .attr(\"countyName\", ({ fips }) => {\n        return countiesMap.objects.counties.geometries.filter(({ id }) => {\n          return fips === Number(id);\n        })[0].properties.name;\n      })\n      .attr(\"transform\", ({ fips }) => {\n        const county_path = d3.select(`#c${fips}`).datum();\n        return `translate(${map_path.centroid(county_path)})`;\n      })\n      .attr(\"r\", (d) => {\n          return d.get(0) === 2 ? 8 : 0;\n      })\n  }, []);\n\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <MapContainer ref={d3Container} />\n    </Container>\n  );\n};\n\nexport default Map;\n","import React from 'react'\nimport styled from 'styled-components'\n\nimport Page from \"../components/page\"\nimport Map from \"../components/lasso/map\"\n\nconst Container = styled.div`\n    width: 100%;\n    display: flex;\n    justify-content: center;\n`\n\nconst Lasso = () => {\n\n    const width = 760;\n    const height = 500;\n    const mapsTranslate: [number, number] = [width / 2, height / 2];\n    const mapsScale = height * 2;\n  \n    const MapSettings = {\n      width,\n      height,\n      translate: mapsTranslate,\n      scale: mapsScale,\n    };\n\n    return (\n        <Page>\n            <Container>\n                <Map MapSettings={MapSettings} />\n            </Container>\n        </Page>\n    )\n}\n\nexport default Lasso;"],"sourceRoot":""}