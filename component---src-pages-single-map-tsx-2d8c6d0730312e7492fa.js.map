{"version":3,"sources":["webpack://my-gatsby-site/./src/components/trivar/cards.tsx","webpack://my-gatsby-site/./src/contexts/mapsContext.tsx","webpack://my-gatsby-site/./src/components/trivar/mapLarge.tsx","webpack://my-gatsby-site/./src/components/trivar/mapViewSingle.tsx","webpack://my-gatsby-site/./src/pages/singleMap.tsx","webpack://my-gatsby-site/./src/utility/mapZoom.ts"],"names":["Container","styled","Title","Text","Row","Card","title","hcount","ccount","hrecent","crecent","MapsContext","createContext","Maps","children","states","topojson","countiesMap","features","counties","Provider","value","MapContainer","county","border","getStateFips","fips","Number","String","slice","MapSettings","highlightedState","highlightedCounty","addState","stateSelector","countySelector","data","time","colorScales","hotScale","coldScale","getRadius","width","height","translate","scale","d3Container","useRef","projection","d3","map_path","useContext","useEffect","map_g","current","attr","append","MapZoom","style","selectAll","enter","id","objects","geometries","filter","val","properties","name","on","county_path","datum","centroid","sparse","recent","hot","cold","event","this","getAttribute","_","ref","Divider","TextContainerArea","TextContainer","MapControls","Button","LegendContainer","Legend","Cards","MapViewSingle","selectedCounty","setSelectedCounty","selectedState","setSelectedState","setTime","LisaContext","mapData","mapTitles","useState","Array","length","mapZoom","setMapZoom","zoomScale","setZoomScale","reset","zooming","forEach","m","currId","select","domain","d","Sparse","count","n","Math","max","countContainer","maxHeight","maxWidth","margin","min","pointData","x","r","remove","xAxis","range","yAxis","call","ticks","tickFormat","i","text","recentContainer","weekValues","keys","map","w","c","onClick","key","mapNum","selectedPage","to","path","g","active","_d","bounds","x0","y0","x1","y1","dx","dy","y","scaleNew","translateNew","transition","duration","clicked","stateId","node","classed"],"mappings":"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","file":"component---src-pages-single-map-tsx-2d8c6d0730312e7492fa.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  border-radius: 10px;\n  background-color: lightgray;\n  width: 160px;\n  margin: 5px;\n  padding: 5px;\n`;\n\nconst Title = styled.h3`\n  margin: 0 0 10px 0;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\ntype Props = {\n  title: string;\n  hcount: number;\n  ccount: number;\n  hrecent: number;\n  crecent: number;\n};\n \nexport default function Card({\n  title,\n  hcount,\n  ccount,\n  hrecent,\n  crecent,\n}: Props) {\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <Row>\n        <Text># Hot Spots:</Text> <Text>{hcount}</Text>\n      </Row>\n      <Row>\n        <Text># Cold Spots:</Text><Text>{ccount}</Text>\n      </Row>\n      <Row>\n        <Text>Last Hot Spot:</Text><Text>{hrecent}</Text>\n      </Row>\n      <Row>\n        <Text>Last Cold Spot:</Text><Text>{crecent}</Text>\n      </Row>\n    </Container>\n  );\n}\n","import React, { createContext } from \"react\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport countiesMap from \"us-atlas/counties-10m.json\";\n\nexport const MapsContext = createContext(null);\n\nexport const Maps = ({ children }) => {\n\n  const states = topojson.feature(countiesMap, countiesMap.objects.states).features\n  const counties = topojson.feature(countiesMap, countiesMap.objects.counties).features\n\n  return (\n    <MapsContext.Provider value={{ states, counties }}>\n      {children}\n    </MapsContext.Provider>\n  );\n};\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport { MapsContext } from \"../../contexts/mapsContext\";\nimport MapZoom from \"../../utility/mapZoom\";\nimport Sparse from \"../../utility/sparse\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  align-items: center;\n  margin: 10px 20px;\n\n  @media (max-width: 830px) {\n    margin: 10px 5px;\n  }\n  @media (max-width: 700px) {\n    margin: 0;\n  }\n\n  font-size: 16pt;\n`;\nconst Title = styled.h3`\n  margin: 0;\n`;\n\nconst MapContainer = styled.svg`\n  g {\n    background-color: light-gray;\n    fill: red;\n  }\n\n  /* use can use an attribute selector but idk how to select on all maps */\n  #c${({ county }: { county: number }) => county}.cboundary {\n    stroke: black;\n    stroke-width: 0.25px;\n  }\n\n  .cboundary {\n    stroke-width: 0px;\n    fill: #ffffff00;\n  }\n\n  .bubble {\n    stroke-width: 0;\n  }\n\n  /*\n  * > path:hover, circle:hover {\n    cursor: pointer;\n  }\n  */\n\n  border: 1px solid\n    ${({ border }: { border: boolean }) => (border ? \"black\" : \"white\")};\n`;\n\nconst getStateFips = (fips: number): number => {\n  return Number(String(fips).slice(0, -3));\n};\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ntype Data = Array<Sparse>;\n\ninterface Props {\n  title: string;\n  MapSettings: MapSettings;\n  countiesMap: any;\n  highlightedState: [number, string];\n  highlightedCounty: [number, string];\n  addState: (m: MapZoom) => void;\n  stateSelector: ([s, s1]: [number, string], b?: boolean) => boolean;\n  countySelector: ([s, s1]: [number, string]) => void;\n  data: Data;\n  time: [number, number];\n  colorScales: [any, any];\n  getRadius: (g: Sparse) => number;\n}\n\nconst MapLarge = ({\n  title,\n  MapSettings,\n  countiesMap,\n  highlightedState,\n  highlightedCounty,\n  addState,\n  stateSelector,\n  countySelector,\n  data,\n  time,\n  colorScales: [hotScale, coldScale],\n  getRadius,\n}: Props) => {\n  const { width, height, translate, scale } = MapSettings;\n\n  const d3Container = useRef(null);\n\n  const projection = d3.geoAlbers().scale(scale).translate(translate);\n  const map_path = d3.geoPath().projection(projection);\n\n  const { counties, states } = useContext(MapsContext);\n\n  useEffect(() => {\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    addState(new MapZoom(map_path, map_g, width, height, highlightedState[0]));\n\n    // States:\n    map_g\n      .append(\"g\")\n      .style(\"stroke\", \"black\")\n      .style(\"stroke-width\", \"0.5px\")\n      .style(\"fill\", \"#ffffffff\")\n      .selectAll(\"path\")\n      .data(states)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateFips\", ({ id }) => Number(id));\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateName\", ({ id }) => {\n        return countiesMap.objects.states.geometries.filter((val) => {\n          return getStateFips(id) === Number(val.id);\n        })[0].properties.name;\n      })\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      .on(\"mouseout\", () => {\n        countySelector([-1, \"\"]);\n      });\n\n    // County Circles:\n    map_g\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"bubble\")\n      /* \n        HAVE TO LOAD COUNTY AND STATE NAME TO BUBBLES HERE:\n          MAYBE PUT THOSE AS SPARSE VECTOR INFO\n      */\n      .attr(\"countyName\", ({ fips }) => {\n        return countiesMap.objects.counties.geometries.filter(({ id }) => {\n          return fips === Number(id);\n        })[0].properties.name;\n      })\n      .attr(\"stateName\", ({ fips }) => {\n        return countiesMap.objects.states.geometries.filter(({ id }) => {\n          return getStateFips(fips) === Number(id);\n        })[0].properties.name;\n      })\n      .attr(\"transform\", ({ fips }) => {\n        const county_path = d3.select(`#c${fips}`).datum();\n        return `translate(${map_path.centroid(county_path)})`;\n      })\n      .on(\"mouseout\", () => {\n        countySelector([-1, \"\"]);\n      });\n  }, []);\n\n  useEffect(() => {\n    d3.selectAll(\".bubble\")\n      .attr(\"r\", getRadius)\n      .style(\"fill\", (sparse) => {\n        const [hot, cold] = sparse.recent(...time);\n        return hot > cold ? hotScale(hot) : coldScale(cold);\n      });\n  }, [time]);\n\n  useEffect(() => {\n    d3.selectAll(\".cboundary\").on(\"click\", function (event, { id }) {\n      stateSelector([getStateFips(id), this.getAttribute(\"stateName\")]);\n    });\n\n    d3.selectAll(\".cboundary\").on(\n      \"mouseover\",\n      function (event, { id, properties: { name } }) {\n        if (highlightedState[1] !== \"\") {\n          countySelector([Number(id), name]);\n        }\n      }\n    );\n\n    d3.selectAll(\".bubble\")\n      .on(\"mouseover\", function (_, { fips }) {\n        if (!highlightedState) {\n          return;\n        }\n        // console.log(getStateFips(d.fips), highlightedState[0])\n        if (highlightedState[1] !== \"\") {\n          countySelector([fips, this.getAttribute(\"countyName\")]);\n        }\n      })\n      .on(\"click\", function (event, { fips }) {\n        stateSelector([getStateFips(fips), this.getAttribute(\"stateName\")]);\n      })\n      .style(\"fill-opacity\", ({ fips }) => {\n        return highlightedState[0] === -1 ||\n          getStateFips(fips) === highlightedState[0]\n          ? 1\n          : 0.2;\n      });\n  }, [highlightedState]);\n\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <MapContainer\n        ref={d3Container}\n        county={highlightedCounty[0]}\n        border={highlightedState[0] !== -1}\n      />\n    </Container>\n  );\n};\n\nexport default MapLarge;\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\n//import us from \"us-atlas/nation-10m.json\"\nimport counties from \"us-atlas/counties-10m.json\";\nimport states from \"us-atlas/states-10m.json\";\n//import data from \"../data/counties.json\";\n\nimport MapZoom from \"../../utility/mapZoom\";\nimport Sparse from \"../../utility/sparse\";\nimport Card from \"./cards\";\nimport MapLarge from \"./mapLarge\";\nimport { LisaContext } from \"../../contexts/lisaContext\";\n\nimport { Maps } from \"../../contexts/mapsContext\";\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n`;\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\n\nconst TextContainerArea = styled.div`\n  width: 100%;\n`;\n\nconst TextContainer = styled.div`\n  margin: 0 15px;\n  display: flex;\n  justify-content: space-between;\n\n  @media (max-width: 500px) {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n`;\n\nconst MapControls = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst MapContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  flex-wrap: wrap;\n\n  @media (max-width: 770px) {\n    flex-wrap: wrap;\n  }\n`;\n\nconst Button = styled.button`\n  border-radius: 10px;\n  height: 30px;\n  width: 60px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: center;\n\n  width: 100%;\n  flex-wrap: wrap;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  width: 100%;\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n  white-space: nowrap;\n`;\n\nconst LegendContainer = styled.div`\n  display: flex;\n  width: 85%;\n  justify-content: space-between;\n  @media (max-width: 770px) {\n    width: 100%;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n`;\n\nconst Legend = styled.div`\n  margin: 10px 0;\n  width: 380px;\n  display: flex;\n  justify-content: center;\n  align-itms: center;\n`;\n\nconst Cards = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  flex-wrap: wrap;\n`;\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ntype Data = Array<Sparse>;\n\ntype Props = {\n  MapSettings: MapSettings;\n  selectedCounty: [number, string];\n  setSelectedCounty: ([s1, s2]: [number, string]) => void;\n  selectedState: [number, string];\n  setSelectedState: ([s1, s2]: [number, string]) => void;\n  time: [number, number];\n  setTime: ([n1, n2]: [number, number]) => void;\n};\n\nconst getStateFips = (fips: number): number => {\n  return Number(String(fips).slice(0, -3));\n};\n\nexport default function MapViewSingle({\n  MapSettings,\n  selectedCounty,\n  setSelectedCounty,\n  selectedState,\n  setSelectedState,\n  time,\n  setTime,\n}: Props) {\n  const { mapData, mapTitles } = useContext(LisaContext);\n\n  const [mapZoom, setMapZoom] = useState(Array<MapZoom>(mapTitles.length));\n\n  const addState = (m: MapZoom, mapNum: number) => {\n    mapZoom[mapNum] = m;\n    setMapZoom(mapZoom);\n  };\n\n  const [zoomScale, setZoomScale] = useState(1);\n\n  const stateSelector = (\n    [id, name]: [number, string],\n    reset: boolean = false\n  ) => {\n    let zooming: boolean;\n\n    mapZoom.forEach((m) => {\n      if (!reset && id !== m.currId && id !== -1) {\n        setZoomScale(m.select(id));\n        zooming = true;\n      } else {\n        m.reset();\n        setZoomScale(1);\n        zooming = false;\n      }\n    });\n\n    if (zooming) {\n      setSelectedState([id, name]);\n      return true;\n    } else {\n      setSelectedState([-1, \"\"]);\n      return false;\n    }\n  };\n\n  const countySelector = ([id, name]: [number, string]) => {\n    if (id === -1 || getStateFips(id) === selectedState[0]) {\n      setSelectedCounty([id, name]);\n    }\n  };\n\n  const coldScale = d3\n    .scaleSequentialPow(d3.interpolateBlues)\n    .domain([...time]);\n  const hotScale = d3.scaleSequentialPow(d3.interpolateReds).domain([...time]);\n\n  const getRadius = (d: Sparse | number) => {\n    const val = d instanceof Sparse ? d.count(...time) : [d];\n    const n = d instanceof Sparse ? d.n : time[1];\n    return (30 + Math.max(...val)) / n;\n  };\n\n  const countContainer = useRef(null);\n\n  const maxHeight = 100;\n  const maxWidth = 370;\n  const margin = [20, 20];\n\n  useEffect(() => {\n    const width = Math.min(maxWidth, 100 + zoomScale * 10) - 2 * margin[0];\n    const height = Math.min(maxHeight, 40 + zoomScale * 2);\n\n    const pointData = [\n      { x: 1, r: 1 },\n      { x: 2, r: 5 },\n      { x: 3, r: 10 },\n      { x: 4, r: 20 },\n      { x: 5, r: 52 },\n    ];\n\n    d3.select(countContainer.current).selectAll(\"*\").remove();\n\n    const map_g = d3\n      .select(countContainer.current)\n      .style(\"width\", width + (7 / 2) * margin[0])\n      .style(\"height\", height + 2 * margin[1])\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`);\n\n    const xAxis = d3\n      .scaleLinear()\n      .domain([1, pointData[pointData.length - 1].x])\n      .range([0, width]);\n    const yAxis = d3.scaleLinear().domain([0, 1]).range([height, 0]);\n\n    map_g\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        `translate(0,${(margin[1] * 3) / 2 + (zoomScale * 5) / 2})`\n      )\n      .call(\n        d3\n          .axisBottom(xAxis)\n          .ticks(5)\n          .tickFormat((i) => String(pointData[i - 1].r))\n      );\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`)\n      .call(d3.axisLeft(yAxis))\n      .style(\"display\", \"none\");\n\n    map_g\n      .selectAll(\"dot\")\n      .remove()\n      .data(pointData)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"point\")\n      .attr(\"cx\", ({ x }) => xAxis(x))\n      .attr(\"cy\", () => yAxis(0.5))\n      .attr(\"r\", ({ r }) => getRadius(r) * zoomScale)\n      .style(\"fill\", \"black\");\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"x\", width / 2 )\n      .attr(\"y\", height + (margin[1] * 3) / 2 + zoomScale / 4)\n      .text(\"Count\")\n      .style(\"font-size\", \"16pt\")\n  }, [time, zoomScale]);\n\n  const recentContainer = useRef(null);\n\n  const circleWidth = 40;\n\n  useEffect(() => {\n    d3.select(recentContainer.current).selectAll(\"*\").remove();\n\n    const leftMargin = 30;\n\n    const map_g = d3\n      .select(recentContainer.current)\n      .style(\"width\", maxWidth)\n      .style(\"height\", maxHeight)\n      // .style(\"background-color\", \"lightgray\")\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        `translate(${leftMargin + margin[0] + circleWidth + 10},0)`\n      );\n\n    const weekValues = [1, 5, 10, 15, 20, 25, 30, 40, 46, 52];\n\n    const pointData = [...Array(weekValues.length * 2).keys()].map((i) => {\n      return {\n        x: (i % weekValues.length) + 1,\n        w: weekValues[i % weekValues.length],\n        c: i < weekValues.length ? 1 : 2,\n      };\n    });\n\n    const xAxis = d3\n      .scaleLinear()\n      .domain([1, weekValues.length])\n      .range([0, maxWidth - circleWidth - 2 * margin[0] - leftMargin]);\n    const yAxis = d3\n      .scaleLinear()\n      .domain([0, 3])\n      .range([maxHeight - 2 * margin[1], 0]);\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(0,${margin[1] + (maxHeight * 5) / 12})`)\n      .call(\n        d3\n          .axisBottom(xAxis)\n          .ticks(5)\n          .tickFormat((i) => String(pointData[i - 1].w))\n      );\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`)\n      .call(d3.axisLeft(yAxis))\n      .style(\"display\", \"none\");\n\n    map_g\n      .selectAll(\"dot\")\n      .remove()\n      .data(pointData)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"point\")\n      .attr(\"cx\", ({ x }) => xAxis(x))\n      .attr(\"cy\", ({ c }) => yAxis(c))\n      .attr(\"r\", () => 9)\n      .style(\"fill\", ({ c, w }) => (c === 1 ? hotScale(w) : coldScale(w)));\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"x\", maxWidth / 2 - circleWidth)\n      .attr(\"y\", (maxHeight * 19) / 20 + 2)\n      .text(\"Week Number\")\n      .style(\"font-size\", \"16pt\")\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", -leftMargin / 2)\n      .attr(\"y\", maxHeight / 2 - 5)\n      .text(\"Hotspots\")\n      .style(\"font-size\", \"14pt\")\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", -leftMargin / 2)\n      .attr(\"y\", maxHeight / 4)\n      .text(\"Coldspots\")\n      .style(\"font-size\", \"14pt\")\n  }, [time, zoomScale]);\n\n  // useEffect(() => {\n  //   d3\n  //     .select(d3Container.current)\n  //     .selectAll(\".point\")\n  //     .attr(\"r\", ({ r }) => getRadius(r) * zoomScale)\n  // }, [time, zoomScale])\n\n  return (\n    <Container>\n      <TextContainerArea>\n        <TextContainer>\n          {selectedState[0] !== -1 ? (\n            <>\n              <MapControls>\n                <Title>Selected State: {selectedState[1]}</Title>\n                <Text>\n                  Highlight over a county to read its specific values.\n                </Text>\n              </MapControls>\n              <Button\n                onClick={() => {\n                  stateSelector([-1, \"\"], true);\n                }}\n              >\n                Reset\n              </Button>\n            </>\n          ) : (\n            <Text>\n              Click a state on the map to zoom in and see county specific\n              information.\n            </Text>\n          )}\n        </TextContainer>\n      </TextContainerArea>\n      <Divider />\n      <Maps>\n        <MapContainer>\n          {mapTitles.map((title, i) => {\n            return i === 0 ? (\n              <MapLarge\n                key={i}\n                MapSettings={MapSettings}\n                title={title}\n                countiesMap={counties}\n                highlightedCounty={selectedCounty}\n                highlightedState={selectedState}\n                addState={(m: MapZoom) => addState(m, i)}\n                stateSelector={stateSelector}\n                countySelector={countySelector}\n                time={time}\n                data={mapData ? mapData[i] : null}\n                colorScales={[hotScale, coldScale]}\n                getRadius={getRadius}\n              />\n            ) : null;\n          })}\n        </MapContainer>\n      </Maps>\n      <Row>\n        {selectedCounty[1] ? (\n          <Title>Selected County: {selectedCounty[1]} County</Title>\n        ) : null}\n      </Row>\n      <Cards>\n        {selectedCounty[0] !== -1\n          ? [0, 2, 1, 3].map((i) => {\n              const county = mapData\n                ? mapData[i].filter(\n                    (d) => Number(d.fips) === Number(selectedCounty[0])\n                  )[0]\n                : false;\n\n              const [hcount, ccount] = county ? county.count(...time) : [0, 0];\n              const [hrecent, crecent] = county\n                ? county.recent(...time)\n                : [0, 0];\n\n              return (\n                <Card\n                  key={i}\n                  title={mapTitles[i]}\n                  hcount={hcount}\n                  ccount={ccount}\n                  hrecent={hrecent}\n                  crecent={crecent}\n                />\n              );\n            })\n          : null}\n      </Cards>\n      <LegendContainer>\n        <Legend>\n          <svg ref={recentContainer} />\n        </Legend>\n        <Legend>\n          <svg ref={countContainer} />\n        </Legend>\n      </LegendContainer>\n    </Container>\n  );\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"gatsby\";\n\nimport MapViewSingle from \"../components/trivar/mapViewSingle\";\nimport Page from \"../components/page\";\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 100%;\n\n  & > h1 {\n    margin: 10px 15px 0 15px;\n  }\n\n  & > h2 {\n    margin: 5px 15px 0 15px;\n  }\n`;\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\nconst Text = styled.p`\n  margin: 5px 15px;\n`;\nconst singleMap = () => {\n  const width = 380 * 2;\n  const height = 250 * 2;\n  const mapsTranslate: [number, number] = [width / 2 - 5, height / 2];\n  const mapsScale = 500 * 2;\n\n  const MapSettings = {\n    width: width - 10,\n    height,\n    translate: mapsTranslate,\n    scale: mapsScale,\n  };\n\n  const [selectedCounty, setSelectedCounty] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  const [selectedState, setSelectedState] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  const [time, setTime] = useState<[number, number]>([0, 52]);\n\n  return (\n    <Page selectedPage=\"singlemap\">\n      <Container>\n        <TextContainer>\n          <h1>Clustering Recency & Consistency</h1>\n          <Text>\n            This page provides a single view representation of the{\" \"}\n            <Link to=\"/animated\">animated choropleth maps</Link> by using\n            symbols to show the temporal aspects in a single view. Counties that\n            were either a hot spot or cold spot at least once in 2020 have a\n            circle over them. If the circle is colored blue then the county was\n            a cold spot at some point in time and if it is color red it was a\n            hot spot. The radius of the circle shows the number of times that\n            county was a hot or cold spot in the given period. A circle with a\n            larger radius indicates that it was a hot spot or cold spot more\n            times in the year. A darker color shows the last time the county was\n            a hot spot or cold spot was later in the year while a lighter color\n            means the last time the county was a hot spot or cold spot was\n            earlier in the year.\n          </Text>\n        </TextContainer>\n        <Divider />\n        <MapViewSingle\n          MapSettings={MapSettings}\n          selectedCounty={selectedCounty}\n          setSelectedCounty={setSelectedCounty}\n          selectedState={selectedState}\n          setSelectedState={setSelectedState}\n          time={time}\n          setTime={setTime}\n        />\n        <Divider />\n      </Container>\n    </Page>\n  );\n};\n\nexport default singleMap;\n","import * as d3 from \"d3\"\n\nexport default class MapZoom {\n    active = d3.select(null);\n    path = null\n    g = null\n    width = 0\n    height = 0\n    currId = -1\n\n    constructor(path, g, width, height, id) {\n        this.path = path\n        this.g = g;\n        this.width = width\n        this.height = height\n        this.currId = id\n    }\n\n    /*\n        Zoom in from id\n    */\n    select(id: number) {\n        this.currId = id;\n\n        const clicked = this.g.select(`[stateFips='${id}']`);\n\n        // // this.active.classed(\"active\", false);\n        // // this.active = clicked.classed(\"active\", true);\n\n        let d;\n        clicked.attr('x', (_d, i) => {\n            d = _d\n        })\n\n        const [[x0, y0], [x1, y1]] = this.path.bounds(d);\n\n        const dx = x1 - x0;\n        const dy = y1 - y0;\n        const x = (x0 + x1) / 2;\n        const y = (y0 + y1) / 2;\n\n        // const box = d.node().getBBox()\n\n        // const dx = box.width\n        // const dy = box.height\n        // const x = box.x + box.width / 2\n        // const y = box.y + box.height / 2\n\n        // console.log(x, y, dx, dy)\n\n        const scaleNew = 0.8 / Math.max(dx / this.width, dy / this.height);\n        const translateNew = [this.width / 2 - scaleNew * x, this.height / 2 - scaleNew * y]\n\n        this.g\n            .transition()\n            .duration(650)\n            .attr(\"transform\", `translate(${translateNew}) scale(${scaleNew})`)\n\n        return scaleNew\n    }\n\n    /*\n        On click event handler,\n\n\n        not used, WON'T WORK ANYMORE\n    */\n    clicked(clicked, d) {\n        const stateId = clicked.getAttribute(\"id\")\n        // const states = d3.selectAll(`[id='${stateId}']`)\n\n        if (this.active.node() === clicked) {\n            return this.reset();\n        }\n\n        this.active.classed(\"active\", false);\n        this.active = d3.select(clicked).classed(\"active\", true);\n\n        const [[x0, y0], [x1, y1]] = this.path.bounds(d);\n\n        const dx = x1 - x0;\n        const dy = y1 - y0;\n        const x = (x0 + x1) / 2;\n        const y = (y0 + y1) / 2;\n\n        const scaleNew = 0.7 / Math.max(dx / this.width, dy / this.height);\n        const translateNew = [this.width / 2 - scaleNew * x, this.height / 2 - scaleNew * y]\n\n        this.g\n            .transition()\n            .duration(650)\n            .attr(\"transform\", `translate(${translateNew}) scale(${scaleNew})`)\n\n        return stateId\n    }\n\n    /*\n        Reset map view\n    */\n    reset() {\n        this.currId = \"\"\n        this.active.classed(\"active\", false);\n        this.active = d3.select(null);\n\n        this.g\n            .transition()\n            .duration(500)\n            .attr(\"transform\", `translate(0)`)\n    }\n}"],"sourceRoot":""}