(self.webpackChunkmy_gatsby_site=self.webpackChunkmy_gatsby_site||[]).push([[122],{9882:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(7294),a=n(9),i=a.ZP.div.withConfig({displayName:"cards__Container",componentId:"sc-134r6bf-0"})(["display:flex;flex-direction:column;border-radius:10px;background-color:lightgray;width:170px;margin:5px;padding:5px;"]),l=a.ZP.h3.withConfig({displayName:"cards__Title",componentId:"sc-134r6bf-1"})(["margin:0 0 10px 0;"]),c=a.ZP.p.withConfig({displayName:"cards__Text",componentId:"sc-134r6bf-2"})(["margin:0;"]),o=a.ZP.div.withConfig({displayName:"cards__Row",componentId:"sc-134r6bf-3"})(["display:flex;justify-content:space-between;"]);function s(t){var e=t.title,n=t.hcount,a=t.ccount,s=t.hrecent,u=t.crecent;return r.createElement(i,null,r.createElement(l,null,e),r.createElement(o,null,r.createElement(c,null,"# Hot Spots:")," ",r.createElement(c,null,n)),r.createElement(o,null,r.createElement(c,null,"# Cold Spots:"),r.createElement(c,null,a)),r.createElement(o,null,r.createElement(c,null,"Last Hot Spot:"),r.createElement(c,null,s)),r.createElement(o,null,r.createElement(c,null,"Last Cold Spot:"),r.createElement(c,null,u)))}},4390:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return F}});var r=n(7294),a=n(9),i=n(7329),l=n(3051),c=n(5743),o=n(6372),s=n(9882),u=n(7576),d=n(8928),p=a.ZP.div.withConfig({displayName:"map__Container",componentId:"sc-1o8yluv-0"})(["display:flex;flex-direction:column;align-items:center;margin:10px;"]),f=a.ZP.h3.withConfig({displayName:"map__Title",componentId:"sc-1o8yluv-1"})(["margin:0;"]),m=a.ZP.svg.withConfig({displayName:"map__MapContainer",componentId:"sc-1o8yluv-2"})(["g{background-color:light-gray;fill:red;}border:1px solid black;#c",".cboundary{stroke:black;stroke-width:0.25px;}.cboundary{stroke-width:0px;fill:#ffffff00;}.bubble{stroke-width:0;}"],(function(t){return t.county})),h=function(t){return Number(String(t).slice(0,-3))},g=function(t){var e=t.title,n=t.MapSettings,a=t.countiesMap,c=t.highlightedState,o=t.highlightedCounty,s=t.addState,g=t.stateSelector,y=t.countySelector,v=t.data,x=t.time,w=t.colorScales,b=w[0],C=w[1],E=t.getRadius,_=n.width,S=n.height,N=n.translate,Z=n.scale,k=(0,r.useRef)(null),I=l.FWi().scale(Z).translate(N),j=l.l49().projection(I);return(0,r.useEffect)((function(){var t=l.Ys(k.current).attr("width",_).attr("height",S).append("g");s(new d.Z(j,t,_,S,c[0])),t.append("g").style("stroke","black").style("stroke-width","0.5px").style("fill","#ffffffff").selectAll("path").data(u.zL(a,a.objects.states).features).enter().append("path").attr("d",j).attr("stateFips",(function(t){var e=t.id;return Number(e)})),t.append("g").selectAll("path").data(u.zL(a,a.objects.counties).features).enter().append("path").attr("d",j).attr("stateName",(function(t){var e=t.id;return a.objects.states.geometries.filter((function(t){return h(e)===Number(t.id)}))[0].properties.name})).attr("id",(function(t){var e=t.id;return"c"+Number(e)})).attr("class","cboundary").on("mouseout",(function(){y([-1,""])})),t.selectAll("circle").data(v).enter().append("circle").attr("class","bubble").attr("countyName",(function(t){var e=t.fips;return a.objects.counties.geometries.filter((function(t){var n=t.id;return e===Number(n)}))[0].properties.name})).attr("stateName",(function(t){var e=t.fips;return a.objects.states.geometries.filter((function(t){var n=t.id;return h(e)===Number(n)}))[0].properties.name})).attr("transform",(function(t){var e=t.fips,n=l.Ys("#c"+e).datum();return"translate("+j.centroid(n)+")"})).on("mouseout",(function(){y([-1,""])}))}),[]),(0,r.useEffect)((function(){l.td_(".bubble").attr("r",E).style("fill",(function(t){var e=t.recent.apply(t,(0,i.Z)(x)),n=e[0],r=e[1];return n>r?b(n):C(r)}))}),[x]),(0,r.useEffect)((function(){l.td_(".cboundary").on("click",(function(t,e){var n=e.id;g([h(n),this.getAttribute("stateName")])})),l.td_(".cboundary").on("mouseover",(function(t,e){var n=e.id,r=e.properties.name;""!==c[1]&&y([Number(n),r])})),l.td_(".bubble").on("mouseover",(function(t,e){var n=e.fips;c&&""!==c[1]&&y([n,this.getAttribute("countyName")])})).on("click",(function(t,e){var n=e.fips;g([h(n),this.getAttribute("stateName")])})).style("fill-opacity",(function(t){var e=t.fips;return-1===c[0]||h(e)===c[0]?1:.2}))}),[c]),r.createElement(p,null,r.createElement(f,null,e),r.createElement(m,{ref:k,county:o[0]}))},y=n(9088),v=a.ZP.div.withConfig({displayName:"mapView__Container",componentId:"sc-1ogju75-0"})(["display:flex;flex-direction:column;align-items:center;"]),x=a.ZP.div.withConfig({displayName:"mapView__MapContainer",componentId:"sc-1ogju75-1"})(["display:flex;flex-direction:row;justify-content:center;width:100%;flex-wrap:wrap;@media (max-width:770px){flex-wrap:wrap;}"]),w=a.ZP.div.withConfig({displayName:"mapView__Row",componentId:"sc-1ogju75-2"})(["display:flex;flex-direction:row;justify-content:space-evenly;width:100%;flex-wrap:wrap;"]),b=a.ZP.p.withConfig({displayName:"mapView__Text",componentId:"sc-1ogju75-3"})(["margin:0;width:100px;white-space:nowrap;"]),C=a.ZP.button.withConfig({displayName:"mapView__Button",componentId:"sc-1ogju75-4"})(["width:50px;"]),E=a.ZP.div.withConfig({displayName:"mapView__LegendContainer",componentId:"sc-1ogju75-5"})(["width:800px;display:flex;height:auto;"]),_=a.ZP.div.withConfig({displayName:"mapView__Legend",componentId:"sc-1ogju75-6"})(["margin:10px;width:390px;display:flex;justify-content:center;align-items:center;"]),S=a.ZP.div.withConfig({displayName:"mapView__Cards",componentId:"sc-1ogju75-7"})(["display:flex;flex-direction:row;justify-content:space-evenly;flex-wrap:wrap;width:70%;"]);function N(t){var e=t.MapSettings,n=t.selectedCounty,a=t.setSelectedCounty,u=t.selectedState,d=t.setSelectedState,p=t.time,f=(t.setTime,(0,r.useContext)(y.z)),m=f.mapData,h=f.mapTitles,N=(0,r.useState)(Array(h.length)),Z=N[0],k=N[1],I=(0,r.useState)(1),j=I[0],P=I[1],Y=function(t,e){var n,r=t[0],a=t[1];return void 0===e&&(e=!1),Z.forEach((function(t){e||r===t.currId||-1===r?(t.reset(),P(1),n=!1):(P(t.select(r)),n=!0)})),n?(d([r,a]),!0):(d([-1,""]),!1)},A=function(t){var e=t[0],n=t[1];-1!==e&&Number(String(e).slice(0,-3))!==u[0]||a([e,n])},M=l.bEe(l.sY$).domain((0,i.Z)(p)),L=l.bEe(l.bc$).domain((0,i.Z)(p)),F=function(t){var e=t instanceof o.Z?t.count.apply(t,(0,i.Z)(p)):[t],n=t instanceof o.Z?t.n:p[1];return(30+Math.max.apply(Math,(0,i.Z)(e)))/n},R=(0,r.useRef)(null),T=100,V=380,B=[20,20];(0,r.useEffect)((function(){var t=Math.min(V,100+10*j)-2*B[0],e=Math.min(T,40+2*j),n=[{x:1,r:1},{x:2,r:5},{x:3,r:10},{x:4,r:20},{x:5,r:52}];l.Ys(R.current).selectAll("*").remove();var r=l.Ys(R.current).style("width",t+3.5*B[0]).style("height",e+2*B[1]).append("g").attr("transform","translate("+B[0]+",0)"),a=l.BYU().domain([1,n[n.length-1].x]).range([0,t]),i=l.BYU().domain([0,1]).range([e,0]);r.append("g").attr("transform","translate(0,"+(3*B[1]/2+5*j/2)+")").call(l.LLu(a).ticks(5).tickFormat((function(t){return String(n[t-1].r)}))),r.append("g").attr("transform","translate("+B[0]+",0)").call(l.y4O(i)).style("display","none"),r.selectAll("dot").remove().data(n).enter().append("circle").attr("class","point").attr("cx",(function(t){var e=t.x;return a(e)})).attr("cy",(function(){return i(.5)})).attr("r",(function(t){var e=t.r;return F(e)*j})).style("fill","black"),r.append("text").attr("text-anchor","end").attr("x",t/2+B[0]).attr("y",e+3*B[1]/2+j/4).text("Count")}),[p,j]);var U=(0,r.useRef)(null);return(0,r.useEffect)((function(){l.Ys(U.current).selectAll("*").remove();var t=l.Ys(U.current).style("width",V).style("height",T).append("g").attr("transform","translate("+(30+B[0])+",0)"),e=[1,5,10,15,20,25,30,40,46,52],n=(0,i.Z)(Array(2*e.length).keys()).map((function(t){return{x:t%e.length+1,w:e[t%e.length],c:t<e.length?1:2}})),r=l.BYU().domain([1,e.length]).range([0,V-2*B[0]-30]),a=l.BYU().domain([0,3]).range([T-2*B[1],0]);t.append("g").attr("transform","translate(0,"+(B[1]+500/12)+")").call(l.LLu(r).ticks(5).tickFormat((function(t){return String(n[t-1].w)}))),t.append("g").attr("transform","translate("+B[0]+",0)").call(l.y4O(a)).style("display","none"),t.selectAll("dot").remove().data(n).enter().append("circle").attr("class","point").attr("cx",(function(t){var e=t.x;return r(e)})).attr("cy",(function(t){var e=t.c;return a(e)})).attr("r",(function(){return 9})).style("fill",(function(t){var e=t.c,n=t.w;return 1===e?L(n):M(n)})),t.append("text").attr("text-anchor","end").attr("x",220).attr("y",95).text("Week Number"),t.append("text").attr("text-anchor","end").attr("x",-15).attr("y",45).text("Hot"),t.append("text").attr("text-anchor","end").attr("x",-15).attr("y",25).text("Cold")}),[p,j]),r.createElement(v,null,r.createElement(b,null,"Selected State: ",u[1]),r.createElement(x,null,h.map((function(t,a){return r.createElement(g,{key:a,MapSettings:e,title:t,countiesMap:c,highlightedCounty:n,highlightedState:u,addState:function(t){return function(t,e){Z[e]=t,k(Z)}(t,a)},stateSelector:Y,countySelector:A,time:p,data:m?m[a]:null,colorScales:[L,M],getRadius:F})}))),r.createElement(b,null,n[1]?"Selected County: "+n[1]+" County":""),r.createElement(S,null,-1!==n[0]?[0,1,2,3].map((function(t){var e=!!m&&m[t].filter((function(t){return Number(t.fips)===Number(n[0])}))[0],a=e?e.count.apply(e,(0,i.Z)(p)):[0,0],l=a[0],c=a[1],o=e?e.recent.apply(e,(0,i.Z)(p)):[0,0],u=o[0],d=o[1];return r.createElement(s.Z,{key:t,title:h[t],hcount:l,ccount:c,hrecent:u,crecent:d})})):null),r.createElement(E,null,r.createElement(_,null,r.createElement("svg",{ref:U})),r.createElement(_,null,r.createElement("svg",{ref:R}))),r.createElement(w,null,r.createElement(C,{onClick:function(){Y([-1,""],!0)}},"Reset")))}var Z=a.ZP.div.withConfig({displayName:"scatterPlot__Container",componentId:"sc-4luvg1-0"})(["display:flex;flex-direction:column;align-items:center;margin:10px;"]),k=a.ZP.h3.withConfig({displayName:"scatterPlot__Title",componentId:"sc-4luvg1-1"})(["margin:0;"]),I=a.ZP.svg.withConfig({displayName:"scatterPlot__MapContainer",componentId:"sc-4luvg1-2"})([""]),j=function(t){return Number(String(t).slice(0,-3))};function P(t){var e=t.data,n=t.title,a=t.selectedState,c=(t.selectedCounty,t.time),o=380,s=[50,50],u=280,d=(0,r.useRef)(null);return(0,r.useEffect)((function(){var t=l.Ys(d.current),n=t.attr("width",o).attr("height",o).append("g").attr("scale",10).attr("transform","translate("+s+")"),r=l.BYU().domain([0,52]).range([0,280]);n.append("g").attr("transform","translate(0,280)").call(l.LLu(r));var a=l.BYU().domain([0,52]).range([u,0]);n.append("g").call(l.y4O(a)),t.append("text").attr("text-anchor","end").attr("x",240).attr("y",365).text("Week Number"),t.append("text").attr("text-anchor","end").attr("x",-175).attr("y",10).attr("dy","0.75em").attr("transform","rotate(-90)").text("Count");var p=function(t,e){return Object.values(t.map((function(t){var n=t.count.apply(t,(0,i.Z)(e)),r=n[0],a=n[1];return{x:(r>a?t.recent.apply(t,(0,i.Z)(e))[0]:t.recent.apply(t,(0,i.Z)(e))[1])+e[0],y:r>a?r:a,hot:r>a,fips:t.fips}})).reduce((function(t,e){var n=e.x,r=e.y,a=e.fips,i=e.hot,l=n+","+r;return l in t?(t[l].fips.push(a),t[l].hot.push(i)):t[l]={x:n,y:r,fips:[a],hot:[i]},t}),{}))}(e,c),f=l.sY$,m=l.bc$,h=l.jvg().x((function(t){var e=t.x;return r(e)})).y((function(t){var e=t.y;return a(e)}));n.selectAll("myLines").data(e.map((function(t){var e=t.count(),n=e[0],r=e[1];return{data:n>r?t.sequential(1):t.sequential(2),hot:n>r,fips:t.fips}}))).enter().append("path").attr("class","seq").attr("stroke","none").attr("fill","none").attr("stroke-width",1.5).attr("stroke-opacity",.15).attr("d",(function(t){return h(t.data)})),n.selectAll("dot").data(p).enter().append("circle").attr("class","point").attr("cx",(function(t){var e=t.x;return r(e)})).attr("cy",(function(t){var e=t.y;return a(e)})).attr("r",2).style("fill",(function(t){var e,n=t.hot,r=(e=n).reduce((function(t,e){return t+e}))/e.length;return r>.5?m(r):f(1-r)}))}),[c]),(0,r.useEffect)((function(){l.Ys(d.current).selectAll(".point").style("fill-opacity",(function(t){var e=t.fips;return-1===a[0]||void 0!==e.find((function(t){return j(t)===a[0]}))?1:.1})),l.Ys(d.current).selectAll(".seq").style("stroke",(function(t){var e=t.fips,n=t.hot;return j(e)===a[0]?n?"#FF0000":"#0000FF":"none"}))}),[a]),r.createElement(Z,null,r.createElement(k,null,n),r.createElement(I,{ref:d}))}var Y=a.ZP.div.withConfig({displayName:"scatterView__Container",componentId:"sc-1j5pgsd-0"})(["display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;"]);function A(t){var e=t.selectedState,n=t.selectedCounty,a=t.time,i=(0,r.useContext)(y.z),l=i.mapData,c=i.mapTitles;return r.createElement(Y,null,c.map((function(t,i){return r.createElement(P,{key:i,title:t,selectedCounty:n,selectedState:e,data:l?l[i]:null,time:a})})))}var M=n(7183),L=a.ZP.div.withConfig({displayName:"trivar__Container",componentId:"k9jy4d-0"})(["width:100%;display:flex;align-items:center;flex-direction:column;"]),F=function(){var t={width:380,height:250,translate:[190,125],scale:500},e=(0,r.useState)([-1,""]),n=e[0],a=e[1],i=(0,r.useState)([-1,""]),l=i[0],c=i[1],o=(0,r.useState)([0,52]),s=o[0],u=o[1];return r.createElement(M.Z,null,r.createElement(L,null,r.createElement(N,{MapSettings:t,selectedCounty:n,setSelectedCounty:a,selectedState:l,setSelectedState:c,time:s,setTime:u}),r.createElement("hr",{style:{width:"100%"}}),r.createElement(A,{selectedCounty:n,selectedState:l,time:s})))}},8928:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(3051),a=function(){function t(t,e,n,a,i){this.active=r.Ys(null),this.path=null,this.g=null,this.width=0,this.height=0,this.currId=-1,this.path=t,this.g=e,this.width=n,this.height=a,this.currId=i}var e=t.prototype;return e.select=function(t){var e;this.currId=t,this.g.select("[stateFips='"+t+"']").attr("x",(function(t,n){e=t}));var n=this.path.bounds(e),r=n[0],a=r[0],i=r[1],l=n[1],c=l[0],o=l[1],s=c-a,u=o-i,d=(a+c)/2,p=(i+o)/2,f=.8/Math.max(s/this.width,u/this.height),m=[this.width/2-f*d,this.height/2-f*p];return this.g.transition().duration(650).attr("transform","translate("+m+") scale("+f+")"),f},e.clicked=function(t,e){var n=t.getAttribute("id");if(this.active.node()===t)return this.reset();this.active.classed("active",!1),this.active=r.Ys(t).classed("active",!0);var a=this.path.bounds(e),i=a[0],l=i[0],c=i[1],o=a[1],s=o[0],u=o[1],d=s-l,p=u-c,f=(l+s)/2,m=(c+u)/2,h=.7/Math.max(d/this.width,p/this.height),g=[this.width/2-h*f,this.height/2-h*m];return this.g.transition().duration(650).attr("transform","translate("+g+") scale("+h+")"),n},e.reset=function(){this.currId="",this.active.classed("active",!1),this.active=r.Ys(null),this.g.transition().duration(500).attr("transform","translate(0)")},t}()}}]);
//# sourceMappingURL=component---src-pages-trivar-tsx-00121f9ab3379710d24b.js.map