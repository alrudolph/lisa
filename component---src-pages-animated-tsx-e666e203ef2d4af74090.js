(self.webpackChunkmy_gatsby_site=self.webpackChunkmy_gatsby_site||[]).push([[807],{9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,i,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.default=e.exports,e.exports.__esModule=!0},935:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,s=c||u||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,m=function(){return s.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=a.test(e);return n||o.test(e)?l(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,a,o,l,c,u=0,s=!1,d=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,a=i;return r=i=void 0,u=t,o=e.apply(a,n)}function x(e){return u=e,l=setTimeout(b,t),s?y(e):o}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=a}function b(){var e=m();if(v(e))return k(e);l=setTimeout(b,function(e){var n=t-(e-c);return d?f(n,a-(e-u)):n}(e))}function k(e){return l=void 0,w&&r?y(e):(r=i=void 0,o)}function E(){var e=m(),n=v(e);if(r=arguments,i=this,c=e,n){if(void 0===l)return x(c);if(d)return l=setTimeout(b,t),y(c)}return void 0===l&&(l=setTimeout(b,t)),o}return t=g(t)||0,h(n)&&(s=!!n.leading,a=(d="maxWait"in n)?p(g(n.maxWait)||0,t):a,w="trailing"in n?!!n.trailing:w),E.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=c=i=l=void 0},E.flush=function(){return void 0===l?o:k(m())},E}},8385:function(e,t,n){var r="Expected a function",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,s="object"==typeof self&&self&&self.Object===Object&&self,d=u||s||Function("return this")(),p=Object.prototype.toString,f=Math.max,m=Math.min,h=function(){return d.Date.now()};function g(e,t,n){var i,a,o,l,c,u,s=0,d=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError(r);function x(t){var n=i,r=a;return i=a=void 0,s=t,l=e.apply(r,n)}function v(e){return s=e,c=setTimeout(k,t),d?x(e):l}function b(e){var n=e-u;return void 0===u||n>=t||n<0||p&&e-s>=o}function k(){var e=h();if(b(e))return E(e);c=setTimeout(k,function(e){var n=t-(e-u);return p?m(n,o-(e-s)):n}(e))}function E(e){return c=void 0,g&&i?x(e):(i=a=void 0,l)}function C(){var e=h(),n=b(e);if(i=arguments,a=this,u=e,n){if(void 0===c)return v(u);if(p)return c=setTimeout(k,t),x(u)}return void 0===c&&(c=setTimeout(k,t)),l}return t=y(t)||0,w(n)&&(d=!!n.leading,o=(p="maxWait"in n)?f(y(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=u=a=c=void 0},C.flush=function(){return void 0===c?l:E(h())},C}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(w(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=w(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError(r);return w(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),g(e,t,{leading:i,maxWait:t,trailing:a})}},719:function(e,t,n){"use strict";n.d(t,{E:function(){return o},o:function(){return l}});var r=n(7294),i=n(7576),a=n(5743),o=(0,r.createContext)(null),l=function(e){var t=e.children,n=i.zL(a,a.objects.states).features,l=i.zL(a,a.objects.counties).features;return r.createElement(o.Provider,{value:{states:n,counties:l}},t)}},2144:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Je}});var r=n(7294),i=(n(935),n(8385),Object.create(null));i.enableHighAccuracy=!1,i.timeout=4294967295,i.maximumAge=0;Object.freeze(i);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c="object"===("undefined"==typeof window?"undefined":a(window)),u=function(e){return"undefined"!=typeof window&&e in window},s=function(e){if(!c||!u("matchMedia"))return console.warn("matchMedia is not supported, this could happen both because window.matchMedia is not supported by your current browser or you're using the useMediaQuery hook whilst server side rendering."),null;var t=o((0,r.useState)(!!window.matchMedia(e).matches),2),n=t[0],i=t[1];return(0,r.useEffect)((function(){var t=window.matchMedia(e),n=function(){return i(!!t.matches)};return t.addListener(n),n(),function(){t.removeListener(n)}}),[e]),n},d=function(e){try{return JSON.parse(e)}catch(t){return null}},p="undefined"!=typeof process&&{}&&!1,f=function(e){var t="".concat(e,"Storage");return c&&!u(t)&&console.warn("".concat(t," is not supported")),function(e,n){if(!c)return p&&console.warn("Please be aware that ".concat(t," could not be available during SSR")),[JSON.stringify(n),function(){}];var i=window[t],a=o((0,r.useState)(d(i.getItem(e)||JSON.stringify(n))),2),l=a[0],u=a[1];return(0,r.useEffect)((function(){i.setItem(e,JSON.stringify(l))}),[e,l]),[l,u]}},m=(f("local"),f("session"),n(9692)),h=n(2114),g=n(9088),w=n(719),y=n(3051),x=n(8928),v=n(5743),b=m.ZP.div.withConfig({displayName:"map2__Container",componentId:"sc-8v8ba5-0"})(["display:flex;flex-wrap:wrap;flex-direction:column;align-items:center;margin:10px 20px;@media (max-width:830px){margin:10px 5px;}@media (max-width:700px){margin:0;}"]),k=m.ZP.h3.withConfig({displayName:"map2__Title",componentId:"sc-8v8ba5-1"})(["margin:0;"]),E=m.ZP.svg.withConfig({displayName:"map2__MapContainer",componentId:"sc-8v8ba5-2"})(["g{background-color:light-gray;}border:1px solid ",";"],(function(e){return e.border?"black":"white"})),C=function(e){return Number(String(e).slice(0,-3))},N=function(e){var t=e.title,n=(e.highlightedCounty,e.countySelector,e.data),i=(e.time,e.MapSettings),a=e.weekNum,o=e.past,l=e.addState,c=e.stateSelector,u=e.selectedState,s=e.children,d=i.scale,p=i.translate,f=i.width,m=i.height,h=(0,r.useRef)(null),g=(0,r.useContext)(w.E),N=g.counties,S=g.states;return(0,r.useEffect)((function(){var e=y.FWi().scale(d).translate(p),t=y.l49().projection(e),n=y.Ys(h.current).attr("width",f).attr("height",m).append("g");l(new x.Z(t,n,f,m,u[0])),n.append("g").style("stroke","black").style("stroke-width","0.5px").style("fill","#ffffffff").selectAll("path").data(S).enter().append("path").attr("d",t).attr("stateFips",(function(e){var t=e.id;return Number(t)})),n.append("g").selectAll("path").data(N).enter().append("path").attr("d",t).attr("stateName",(function(e){var t=e.id;return v.objects.states.geometries.find((function(e){return C(t)===Number(e.id)})).properties.name})).attr("id",(function(e){var t=e.id;return"c"+Number(t)})).attr("class","cboundary").style("fill","#00000000")}),[]),(0,r.useEffect)((function(){n.forEach((function(e){var t=e.getLast(a),n=t.curr,r=t.last,i=t.weeks,l="#00000000",c=1;o||0===n?o&&(l=0!==n&&1===n||1===r?"#fa5a50":"#5768ac",c=n?1:(a-i+1)/(a+1)*Number(-1!==r)):l=1===n?"#fa5a50":"#5768ac",c*=Math.pow(1/4,1-Number(C(e.fips)===u[0]||-1===u[0]));var s=y.Ys(h.current).select("#c"+e.fips);s.style("fill",l),s.style("fill-opacity",c)}))}),[a,o,u]),(0,r.useEffect)((function(){y.Ys(h.current).selectAll(".cboundary").on("click",(function(e,t){var n=e.currentTarget,r=t.id;c([C(r),n.getAttribute("stateName")])}))}),[u]),r.createElement(b,null,r.createElement(k,null,t),r.createElement(E,{ref:h,border:-1!==u[0]}),s)},S=n(7154),_=n.n(S),P=n(9713),j=n.n(P),A=n(6479),I=n.n(A),O=n(5264);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){return Object.keys(e).reduce((function(t,n){var r;return r=n,(0,O.Z)(r)&&(t[n]=e[n]),t}),{})}var T=r.forwardRef((function(e,t){var n=e.children,i=e.iconAttrs,a=(e.iconVerticalAlign,e.iconViewBox),o=e.size,l=e.title,c=I()(e,["children","iconAttrs","iconVerticalAlign","iconViewBox","size","title"]),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({viewBox:a,height:void 0!==e.height?e.height:o,width:void 0!==e.width?e.width:o,"aria-hidden":null==l?"true":void 0,focusable:"false",role:null!=l?"img":void 0},i),s=M(c);return r.createElement("svg",_()({},u,s,{ref:t}),l&&r.createElement("title",{key:"icon-title"},l),n)})),W=(0,m.ZP)(T).withConfig({displayName:"StyledIconBase",componentId:"ea9ulj-0"})(["display:inline-block;vertical-align:",";overflow:hidden;"],(function(e){return e.iconVerticalAlign})),D=r.forwardRef((function(e,t){return r.createElement(W,_()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"}))}));D.displayName="PlayCircleFill";var V=r.forwardRef((function(e,t){return r.createElement(W,_()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"}))}));V.displayName="PauseCircleFill";var Y=r.forwardRef((function(e,t){return r.createElement(W,_()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10c5.515 0 10-4.486 10-10S17.515 2 12 2zm4 14l-6-4v4H8V8h2v4l6-4v8z"}))}));Y.displayName="SkipPreviousCircle";var z=r.forwardRef((function(e,t){return r.createElement(W,_()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm4 14h-2v-4l-6 4V8l6 4V8h2v8z"}))}));z.displayName="SkipNextCircle";var F=r.forwardRef((function(e,t){return r.createElement(W,_()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm4.82-4.924a7 7 0 10-1.852 1.266l-.975-1.755A5 5 0 1117 12h-3l2.82 5.076z"}))}));F.displayName="Restart";var L=m.ZP.div.withConfig({displayName:"controls__ButtonArea",componentId:"sc-1xay2mf-0"})(["display:flex;width:100%;justify-content:center;*{margin:5px 10px;}& > *:hover{cursor:pointer;}"]),R=function(e){var t=e.week,n=e.setWeek,i=e.playing,a=e.setPlaying;return r.createElement(L,null,r.createElement(Y,{size:"30px",onClick:function(){t>0&&n(t-1),a(!1)}}),51===t?r.createElement(F,{size:"30px",onClick:function(){n(0),a(!1)}}):i?r.createElement(V,{size:"30px",onClick:function(){a(!1)}}):r.createElement(D,{size:"30px",onClick:function(){a(!0)}}),r.createElement(z,{size:"30px",onClick:function(){t<51&&n(t+1),a(!1)}}))},B=n(7329),J=n(9159),H=m.ZP.svg.withConfig({displayName:"slider__SliderBar",componentId:"sc-1beslx3-0"})(["width:760px;height:100px;"]),$=function(e){return new Date(e+" PST")},q=function(e,t){return new Date(e.getTime()+864e5*t)},G=function(e){var t=e.week,n=e.setWeek,i=e.setPlaying,a=e.showWeekNumber,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=(0,r.useRef)(null),c=(0,r.useContext)(J.W).map((function(e){return $(e)})),u=(0,B.Z)(Array(365).keys()).map((function(e){return{d:q(c[0],e),i:e}})).filter((function(e){return 1===e.d.getDate()})),s=y.Xf().domain([c[0],c[c.length-1]]).range([0,600]).clamp(!0),d=function(e){var t;e instanceof Date?(t=(0,B.Z)(Array(c.length).keys()).find((function(t){return c[t]>e||t===c.length-1||c[t]>=e&&0===t})),n(t)):t=e;var r=c[t],i=t+1<c.length?q(c[t+1],-1):$("2020-12-27");y.Ys(l.current).select("#handle").attr("cx",s(r)),y.Ys(l.current).select("#label").attr("x",s(r)).text(r.getMonth()+1+"/"+r.getDate()+" - "+(i.getMonth()+1)+"/"+i.getDate())};return(0,r.useEffect)((function(){var e=y.Ys(l.current).append("svg").attr("width",760).attr("height",100).append("g").attr("transform","translate(80, 50)").attr("id","slider");e.insert("g").selectAll("text").data(u).enter().append("text").attr("x",(function(e){var t=e.d;return s(t)})).attr("y",30).attr("text-anchor","middle").text((function(e){var t=e.d;return o[t.getMonth()]})),e.append("text").attr("x",s(s.invert(600))).attr("y",30).text("2020"),e.append("text").attr("id","weekLabel").attr("x",-75).attr("y",0).text("Week"),e.append("text").attr("x",-55).attr("y",15).attr("id","weekCounter").text("0/52").attr("text-anchor","middle");e.insert("circle").attr("id","handle").attr("r",9),e.append("text").attr("id","label").attr("text-anchor","middle").attr("transform","translate(0,-20)");e.append("line").attr("stroke","black").attr("stroke-width","10px").attr("stroke-opacity",.3).attr("stroke-linecap","round").attr("x1",s.range()[0]).attr("x2",s.range()[1]).select((function(){return this.parentNode.appendChild(this.cloneNode(!0))})).attr("stroke-width","100px").attr("stroke","transparent").call(y.ohM().on("start.interrupt",(function(){return e.interrupt()})).on("start drag",(function(e){i(!1),d(s.invert(e.x))})))}),[]),(0,r.useEffect)((function(){d(t),y.Ys(l.current).select("#weekCounter").text(t+1+"/52")}),[t]),(0,r.useEffect)((function(){y.Ys(l.current).select("#weekCounter").style("fill-opacity",a?1:0),y.Ys(l.current).select("#weekLabel").style("fill-opacity",a?1:0)}),[a]),r.createElement(H,{ref:l})},U=m.ZP.svg.withConfig({displayName:"sliderWithEvents__Slider",componentId:"sc-19upptj-0"})(["width:760px;height:150px;"]),X=function(e){return new Date(e+" PST")},Q=function(e,t){return new Date(e.getTime()+864e5*t)},K=function(e){var t=e.week,n=e.setWeek,i=e.setPlaying,a=e.events,o=e.showWeekNumber,l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=(0,r.useContext)(J.W).map((function(e){return X(e)})),u=(0,B.Z)(Array(365).keys()).map((function(e){return{d:Q(c[0],e),i:e}})).filter((function(e){return 1===e.d.getDate()})),s=(0,r.useRef)(null),d=y.Xf().domain([c[0],c[c.length-1]]).range([0,600]).clamp(!0),p=function(e){var t;e instanceof Date?(t=(0,B.Z)(Array(c.length).keys()).find((function(t){return c[t]>e||t===c.length-1||c[t]>=e&&0===t})),n(t)):t=e;var r=c[t],i=t+1<c.length?Q(c[t+1],-1):X("2020-12-27");y.Ys(s.current).select("#handle").attr("cx",d(r)),y.Ys(s.current).select("#label").attr("x",d(r)).text(r.getMonth()+1+"/"+r.getDate()+" - "+(i.getMonth()+1)+"/"+i.getDate())};return(0,r.useEffect)((function(){var e=y.Ys(s.current).append("svg").attr("width",760).attr("height",150).append("g").attr("transform","translate(80, 100)").attr("id","slider");e.insert("g").selectAll("text").data(u).enter().append("text").attr("x",(function(e){var t=e.d;return d(t)})).attr("y",30).attr("text-anchor","middle").text((function(e){var t=e.d;return l[t.getMonth()]})),e.append("g").attr("id","eventTitles"),e.append("g").attr("id","eventConnectors"),e.append("text").attr("x",d(d.invert(600))).attr("y",30).text("2020"),e.append("text").attr("id","weekLabel").attr("x",-75).attr("y",0).text("Week"),e.append("text").attr("x",-55).attr("y",15).attr("id","weekCounter").text("0/52").attr("text-anchor","middle");e.insert("circle").attr("id","handle").attr("r",9),e.append("text").attr("id","label").attr("text-anchor","middle").attr("transform","translate(0,-20)"),e.append("rect").attr("id","labelBackground");e.append("line").attr("stroke","black").attr("stroke-width","10px").attr("stroke-opacity",.3).attr("stroke-linecap","round").attr("x1",d.range()[0]).attr("x2",d.range()[1]).select((function(){return this.parentNode.appendChild(this.cloneNode(!0))})).attr("stroke-width","100px").attr("stroke","transparent").call(y.ohM().on("start.interrupt",(function(){return e.interrupt()})).on("start drag",(function(e){i(!1),p(d.invert(e.x))})))}),[]),(0,r.useEffect)((function(){y.Ys(s.current).select("#eventTitles").selectAll("text").remove(),y.Ys(s.current).select("#eventConnectors").selectAll("line").remove(),a.forEach((function(e){var n=e.date,r=e.lab;y.Ys(s.current).select("#eventTitles").append("text").attr("fill-opacity",X(n)<c[t]?1:.2).attr("x",d(X(n))).attr("y",-50).attr("text-anchor","middle").text(r),y.Ys(s.current).select("#eventConnectors").append("line").attr("stroke","black").attr("stroke-width","1px").attr("stroke-opacity",X(n)<c[t]?Q(X(n),21)<c[t]?1:.3:.2).attr("x1",d(X(n))).attr("x2",d(X(n))).attr("y1",-15).attr("y2",-40)}))}),[t]),(0,r.useEffect)((function(){p(t),y.Ys(s.current).select("#weekCounter").text(t+1+"/52")}),[t]),(0,r.useEffect)((function(){y.Ys(s.current).select("#weekCounter").style("fill-opacity",o?1:0),y.Ys(s.current).select("#weekLabel").style("fill-opacity",o?1:0)}),[o]),r.createElement(U,{ref:s})},ee=m.ZP.div.withConfig({displayName:"mobileDisplay__TextArea",componentId:"g1084l-0"})(["display:flex;width:100%;flex-direction:column;align-items:center;margin:5px 0;"]),te=m.ZP.p.withConfig({displayName:"mobileDisplay__Text",componentId:"g1084l-1"})(["margin:5px 0;"]),ne=function(e){return new Date(e+" PST")};function re(e){var t,n,i=e.week,a=e.showWeekNumber,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=(0,r.useContext)(J.W).map((function(e){return ne(e)})),c=l[i],u=i+1<l.length?(t=l[i+1],n=-1,new Date(t.getTime()+864e5*n)):ne("2020-12-27");return r.createElement(ee,null,a?r.createElement(te,null,"Week ",i+1,"/52"):null,null!==c?r.createElement(te,null,o[c.getMonth()]," ",c.getDate()," -"," ",o[u.getMonth()]," ",u.getDate()," "):null)}var ie=m.ZP.div.withConfig({displayName:"timeline__Container",componentId:"sc-188udpi-0"})(["width:",";height:","px;"],(function(e){return e.width}),(function(e){return e.height})),ae=function(e){var t=e.week,n=e.setWeek,i=e.playing,a=e.setPlaying,o=e.showWeekNumber,l=e.showEvents,c=e.mobileMode,u=[{date:"2020-03-13",lab:"National Emergency"},{date:"2020-05-28",lab:"100k Deaths"}];return r.createElement(ie,{width:c?"100%":"760px",height:c?115:l?200:150},c?r.createElement(re,{week:t,showWeekNumber:o}):l?r.createElement(K,{week:t,setWeek:n,setPlaying:a,showWeekNumber:o,events:u}):r.createElement(G,{week:t,setWeek:n,setPlaying:a,showWeekNumber:o,events:u}),r.createElement(R,{week:t,setWeek:n,playing:i,setPlaying:a}))},oe=m.ZP.div.withConfig({displayName:"timelinelegend__Container",componentId:"sc-6spnt5-0"})(["display:flex;width:100%;justify-content:flex-end;"]);function le(e){e.week;var t=(0,r.useRef)(null),n=60,i=[20,20];return(0,r.useEffect)((function(){y.Ys(t.current).selectAll("*").remove();var e=y.Ys(t.current).style("width",370).style("height",75).append("g").attr("transform","translate("+(30+i[0])+",0)"),r=y.BYU().domain([1,52]).range([0,370-2*i[0]-30]),a=y.BYU().domain([0,2]).range([n-i[1],0]),o=(0,B.Z)(Array(104).keys()).map((function(e){return{w:Math.floor(e/2),c:e%2}}));e.append("g").attr("transform","translate(0,"+(i[1]+25)+")").call(y.LLu(r).ticks(5)).style("display","none"),e.append("g").attr("transform","translate(0,0)").call(y.y4O(a)).style("display","none"),e.selectAll("rect").remove().data(o).enter().append("rect").attr("class","point").attr("x",(function(e){var t=e.w;return r(t)})).attr("y",(function(e){var t=e.c;return a(t)-5})).attr("width",8).attr("height",15).attr("stroke",(function(e){return 1===e.c?"#fa5a50":"#5768ac"})).attr("stroke-opacity",(function(e){return e.w/52})).attr("stroke-width",0).attr("fill",(function(e){return 1===e.c?"#fa5a50":"#5768ac"})).attr("fill-opacity",(function(e){return e.w/52})),e.append("text").attr("text-anchor","middle").attr("x",r(1)).attr("y",n+i[1]/2).text("Past"),e.append("text").attr("text-anchor","middle").attr("x",r(50)).attr("y",n+i[1]/2).text("Recent"),e.append("text").attr("text-anchor","end").attr("x",-15).attr("y",20+i[1]/4).text("Hot"),e.append("text").attr("text-anchor","end").attr("x",-15).attr("y",40+i[1]/4).text("Cold")}),[]),r.createElement(oe,null,r.createElement("svg",{ref:t}))}var ce=m.ZP.div.withConfig({displayName:"mapView2__ControlArea",componentId:"sc-1n3pnkf-0"})(["display:flex;width:100%;justify-content:space-between;flex-wrap:wrap;"]),ue=m.ZP.div.withConfig({displayName:"mapView2__ControlsContainer",componentId:"sc-1n3pnkf-1"})(["display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin:0 15px;@media (max-width:762px){justify-content:center;width:100%;}"]),se=m.ZP.p.withConfig({displayName:"mapView2__ColdLegend",componentId:"sc-1n3pnkf-2"})(["background-color:#5768acaa;"]),de=m.ZP.p.withConfig({displayName:"mapView2__HotLegend",componentId:"sc-1n3pnkf-3"})(["background-color:#fa5a50aa;"]),pe=m.ZP.div.withConfig({displayName:"mapView2__Legend",componentId:"sc-1n3pnkf-4"})(["display:flex;align-items:center;justify-content:center;& > *{margin:5px;padding:5px;}"]),fe=m.ZP.div.withConfig({displayName:"mapView2__LegendContainer",componentId:"sc-1n3pnkf-5"})(["width:100%;display:flex;justify-content:flex-end;@media (max-width:762px){justify-content:center;}"]),me=m.ZP.div.withConfig({displayName:"mapView2__Container",componentId:"sc-1n3pnkf-6"})(["display:flex;flex-direction:column;align-items:center;"]),he=m.ZP.div.withConfig({displayName:"mapView2__TextContainer",componentId:"sc-1n3pnkf-7"})(["display:flex;flex-direction:column;justify-content:flex-start;max-width:500px;& > h1{margin:5px 15px 0 15px;}"]),ge=m.ZP.p.withConfig({displayName:"mapView2__Text",componentId:"sc-1n3pnkf-8"})(["margin:5px 15px;"]),we=m.ZP.hr.withConfig({displayName:"mapView2__Divider",componentId:"sc-1n3pnkf-9"})(["width:98%;height:1px;background-color:black;border-radius:1px;margin:5px 10px;"]),ye=m.ZP.div.withConfig({displayName:"mapView2__MapContainer",componentId:"sc-1n3pnkf-10"})(["display:flex;flex-direction:row;justify-content:center;width:100%;flex-wrap:wrap;@media (max-width:770px){flex-wrap:wrap;}"]),xe=m.ZP.button.withConfig({displayName:"mapView2__Button",componentId:"sc-1n3pnkf-11"})(["border-radius:10px;height:30px;width:60px;"]),ve=m.ZP.div.withConfig({displayName:"mapView2__CheckBox",componentId:"sc-1n3pnkf-12"})(["display:flex;flex-direction:row;flex-wrap:nowrap;width:180px;"]),be=m.ZP.div.withConfig({displayName:"mapView2__Row",componentId:"sc-1n3pnkf-13"})(["margin:0 3px;"]),ke=m.ZP.h3.withConfig({displayName:"mapView2__Title",componentId:"sc-1n3pnkf-14"})(["margin:3px 15px;white-space:nowrap;"]);function Ee(e){var t=e.selectedCounty,n=e.setSelectedCounty,i=e.MapSettings,a=e.time,o=(e.setTime,e.week),l=e.setWeek,c=e.selectedState,u=e.setSelectedState,s=e.width,d=(0,r.useState)(!1),p=d[0],f=d[1],m=(0,r.useContext)(g.z),h=m.mapData,y=m.mapTitles,x=(0,r.useState)(!1),v=x[0],b=x[1],k=(0,r.useState)(Array(4)),E=k[0],C=k[1],S=(0,r.useState)(!1),_=S[0],P=S[1],j=(0,r.useState)(!1),A=j[0],I=j[1],O=function(e,t){var n,r=e[0],i=e[1];return void 0===t&&(t=!1),E.forEach((function(e){t||r===e.currId||-1===r?(e.reset(),n=!1):(e.select(r),n=!0)})),n?(u([r,i]),!0):(u([-1,""]),!1)};return(0,r.useEffect)((function(){if(v){var e=setInterval((function(){o<51&&l(o+1)}),500);return function(){return clearInterval(e)}}}),[v,o]),r.createElement(me,null,r.createElement(ce,null,r.createElement(he,null,r.createElement(ge,null,"Selecting the cumulative option also includes past values. This view shows the the last time a county was a hot or cold spot by making more distant times a lighter color."),-1===c[0]?r.createElement(ge,null,"Click on a state to zoom into that state."):r.createElement(ke,null,"Selected State: ",c[1])),r.createElement(ue,null,r.createElement(ve,null,r.createElement("form",null,r.createElement(be,null,r.createElement("input",{type:"checkbox",id:"Cumulative",onChange:function(){return f(!p)},checked:p}),r.createElement("label",{htmlFor:"Cumulative"},"Cumulative Map")),r.createElement(be,null,r.createElement("input",{type:"checkbox",id:"ShowWeek",onChange:function(){return P(!_)},checked:_}),r.createElement("label",{htmlFor:"ShowWeek"},"Show Week Number")),s?null:r.createElement(be,null,r.createElement("input",{type:"checkbox",id:"ShowEvents",onChange:function(){return I(!A)},checked:A}),r.createElement("label",{htmlFor:"ShowEvents"},"Timeline Events")))),r.createElement(xe,{onClick:function(){O([-1,""]),l(0),f(!1),b(!1),P(!1),I(!1)}},"Reset"))),r.createElement(we,null),p?r.createElement(le,{week:o}):r.createElement(fe,null,r.createElement(pe,null,r.createElement(de,null,"Hot Spot"),r.createElement(se,null,"Cold Spot"))),r.createElement(w.o,null,r.createElement(ye,null,y.map((function(e,l){return r.createElement(N,{key:l,title:e,highlightedCounty:t,countySelector:n,selectedState:c,stateSelector:O,addState:function(e){return function(e,t){E[t]=e,C(E)}(e,l)},time:a,data:h?h[l]:null,weekNum:o,MapSettings:i,past:p},null)})))),r.createElement(ae,{week:o,setWeek:l,playing:v,setPlaying:b,showWeekNumber:_,showEvents:A,mobileMode:s}),r.createElement(we,null))}var Ce=n(5444),Ne=m.ZP.div.withConfig({displayName:"table__OutsideContainer",componentId:"b45yk0-0"})(["height:100%;width:100%;display:flex;align-items:center;flex-direction:column;"]),Se=m.ZP.div.withConfig({displayName:"table__Container",componentId:"b45yk0-1"})(["display:block;height:100%;overflow-x:auto;width:800px;@media (max-width:800px){width:100%;}"]),_e=m.ZP.table.withConfig({displayName:"table__MainTable",componentId:"b45yk0-2"})(["border-collapse:collapse;width:100%;"]),Pe=m.ZP.thead.withConfig({displayName:"table__THead",componentId:"b45yk0-3"})([""]),je=m.ZP.th.withConfig({displayName:"table__THGroup",componentId:"b45yk0-4"})(["text-align:center;",""],(function(e){return e.underLine?"border-bottom: 1px solid black; border-left: 20px solid white; border-right: 20px solid white;":null})),Ae=m.ZP.th.withConfig({displayName:"table__TH",componentId:"b45yk0-5"})(["min-width:100px !important;text-align:center;border-bottom:1px solid black;"]),Ie=m.ZP.td.withConfig({displayName:"table__TData",componentId:"b45yk0-6"})(["background-color:",";padding:0;margin:0;"],(function(e){var t=e.highlight;return"hot"===t?"#fa5a50AA":"cold"===t?"#5768acAA":"#FFFFFF00"})),Oe=m.ZP.tr.withConfig({displayName:"table__TRow",componentId:"b45yk0-7"})([""]),Ze=m.ZP.tbody.withConfig({displayName:"table__TBody",componentId:"b45yk0-8"})([""," > *:nth-child(2n+1){width:10px;padding:2px;}"," > *{text-align:right;}& > ",":hover{background-color:#d3d3d3;}"," > *:nth-child(2n){width:100px;}"," > *:nth-child(1){width:130px;text-align:left;border-right:1px solid black;}"," > *:nth-child(3){}"," > *:nth-child(7){}"," > *:nth-child(5){border-right:1px solid black;}","{border-bottom:1px solid rgb(205,205,205);}",":last-child{border-bottom:1px solid black;}"],Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe),Me=m.ZP.p.withConfig({displayName:"table__ColdLegend",componentId:"b45yk0-9"})(["background-color:#5768acaa;"]),Te=m.ZP.p.withConfig({displayName:"table__HotLegend",componentId:"b45yk0-10"})(["background-color:#fa5a50aa;"]),We=m.ZP.div.withConfig({displayName:"table__LegendContainer",componentId:"b45yk0-11"})(["display:flex;width:800px;margin:5px 0;@media (max-width:800px){width:100%;}justify-content:space-between;"]),De=m.ZP.div.withConfig({displayName:"table__Legend",componentId:"b45yk0-12"})(["display:flex;align-items:flex-start;& > *{margin:5px;padding:5px;}"]),Ve=m.ZP.p.withConfig({displayName:"table__LegendAsterisk",componentId:"b45yk0-13"})(["margin:5px;"]);function Ye(e){var t=e.selectedState,n=e.week,i=(0,r.useContext)(g.z),a=i.mapData;i.mapTitles;return r.createElement(Ne,null,r.createElement(Se,null,r.createElement(_e,null,r.createElement(Pe,null,r.createElement(Oe,null,r.createElement(je,{underLine:!1},"Counties of"),r.createElement(je,{colSpan:4,underLine:!0},"Mobility"),r.createElement(je,{colSpan:4,underLine:!0},"Sheltered")),r.createElement(Oe,null,r.createElement(Ae,null,t[1]),r.createElement(Ae,{colSpan:2},"Cuebiq*"),r.createElement(Ae,{colSpan:2},"SafeGraph"),r.createElement(Ae,{colSpan:2},"Cuebiq"),r.createElement(Ae,{colSpan:2},"SafeGraph"))),r.createElement(Ze,null,r.createElement(Ce.i1,{query:"2834450407",render:function(e){return e.allRawCsv.nodes.filter((function(e){return Number(e.week)-1===n&&(r=e.fips,Number(String(r).slice(0,-3))===t[0]);var r})).map((function(e,t){var i=e.fips,o=e.cm,l=e.cs,c=e.sm,u=e.ss,s=a[0].find((function(e){return e.fips===Number(i)})),d=void 0!==s?s.get(n):0,p=a[1].find((function(e){return e.fips===Number(i)})),f=void 0!==p?p.get(n):0,m=a[2].find((function(e){return e.fips===Number(i)})),h=void 0!==m?m.get(n):0,g=a[3].find((function(e){return e.fips===Number(i)})),w=void 0!==g?g.get(n):0;return r.createElement(Oe,{key:i},r.createElement(Ie,{highlight:"none"},v.objects.counties.geometries.find((function(e){var t=e.id;return Number(t)===Number(i)})).properties.name),r.createElement(r.Fragment,null,r.createElement(Ie,{highlight:1===d?"hot":2===d?"cold":"none"},o),r.createElement(Ie,{highlight:1===d?"hot":2===d?"cold":"none"})),r.createElement(r.Fragment,null,r.createElement(Ie,{highlight:1===h?"hot":2===h?"cold":"none"},Number(c)/1e3),r.createElement(Ie,{highlight:1===h?"hot":2===h?"cold":"none"},0===t?"km":"")),r.createElement(r.Fragment,null,r.createElement(Ie,{highlight:1===f?"hot":2===f?"cold":"none"},l),r.createElement(Ie,{highlight:1===f?"hot":2===f?"cold":"none"},0===t?"%":"")),r.createElement(r.Fragment,null,r.createElement(Ie,{highlight:1===w?"hot":2===w?"cold":"none"},u),r.createElement(Ie,{highlight:1===w?"hot":2===w?"cold":"none"},0===t?"%":"")))}))}})))),r.createElement(We,null,r.createElement(Ve,null,"* Cuebiq mobility value is an index."),r.createElement(De,null,r.createElement(Te,null,"Hot Spot"),r.createElement(Me,null,"Cold Spot"))))}var ze=m.ZP.div.withConfig({displayName:"animated__Container",componentId:"sc-13u7wpn-0"})(["width:100%;display:flex;align-items:center;flex-direction:column;"]),Fe=m.ZP.div.withConfig({displayName:"animated__TextContainer",componentId:"sc-13u7wpn-1"})(["display:flex;flex-direction:column;justify-content:start;width:100%;& > h1{margin:10px 15px 0 15px;}"]),Le=m.ZP.hr.withConfig({displayName:"animated__Divider",componentId:"sc-13u7wpn-2"})(["width:98%;height:1px;background-color:black;border-radius:1px;margin:5px 10px;"]),Re=m.ZP.p.withConfig({displayName:"animated__Text",componentId:"sc-13u7wpn-3"})(["margin:5px 15px;"]),Be={width:370,height:250,translate:[185,125],scale:500},Je=function(){var e=(0,r.useState)([-1,""]),t=e[0],n=e[1],i=(0,r.useState)([0,52]),a=i[0],o=i[1],l=(0,r.useState)(0),c=l[0],u=l[1],d=(0,r.useState)([-1,""]),p=d[0],f=d[1],m=(0,r.useRef)(null),g=s("(max-width: 750px)");return r.createElement(h.Z,{selectedPage:"Animation"},r.createElement(ze,{ref:m},r.createElement(Fe,null,r.createElement("h1",null,"Animated Spatial Clustering"),r.createElement(Re,null,"These maps show which counties were hot spots (colored red) and cold spots (colored blue) during the specified week on the timeline below.")),r.createElement(Le,null),r.createElement(Ee,{MapSettings:Be,selectedCounty:t,setSelectedCounty:n,time:a,setTime:o,week:c,setWeek:u,selectedState:p,setSelectedState:f,width:g}),-1!==p[0]?r.createElement(r.Fragment,null,r.createElement(Ye,{selectedState:p,week:c})):r.createElement(Fe,null,r.createElement(Re,null,"Click on a state on one of the maps above in order to see individual county values."))))}},8928:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3051),i=function(){function e(e,t,n,i,a){this.active=r.Ys(null),this.path=null,this.g=null,this.width=0,this.height=0,this.currId=-1,this.path=e,this.g=t,this.width=n,this.height=i,this.currId=a}var t=e.prototype;return t.select=function(e){var t;this.currId=e,this.g.select("[stateFips='"+e+"']").attr("x",(function(e,n){t=e}));var n=this.path.bounds(t),r=n[0],i=r[0],a=r[1],o=n[1],l=o[0],c=o[1],u=l-i,s=c-a,d=(i+l)/2,p=(a+c)/2,f=.8/Math.max(u/this.width,s/this.height),m=[this.width/2-f*d,this.height/2-f*p];return this.g.transition().duration(650).attr("transform","translate("+m+") scale("+f+")"),f},t.clicked=function(e,t){var n=e.getAttribute("id");if(this.active.node()===e)return this.reset();this.active.classed("active",!1),this.active=r.Ys(e).classed("active",!0);var i=this.path.bounds(t),a=i[0],o=a[0],l=a[1],c=i[1],u=c[0],s=c[1],d=u-o,p=s-l,f=(o+u)/2,m=(l+s)/2,h=.7/Math.max(d/this.width,p/this.height),g=[this.width/2-h*f,this.height/2-h*m];return this.g.transition().duration(650).attr("transform","translate("+g+") scale("+h+")"),n},t.reset=function(){this.currId="",this.active.classed("active",!1),this.active=r.Ys(null),this.g.transition().duration(500).attr("transform","translate(0)")},e}()}}]);
//# sourceMappingURL=component---src-pages-animated-tsx-e666e203ef2d4af74090.js.map