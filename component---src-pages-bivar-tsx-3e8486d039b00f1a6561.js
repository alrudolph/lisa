(self.webpackChunkmy_gatsby_site=self.webpackChunkmy_gatsby_site||[]).push([[10],{921:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var a=n(7294),r=n(9),i=n(7183),l=n(5743),c=n(9088),o=n(3051),s=n(7576),u=r.ZP.div.withConfig({displayName:"map__Container",componentId:"tmzwc-0"})(["display:flex;flex-direction:column;align-items:center;margin:10px;"]),p=r.ZP.h3.withConfig({displayName:"map__Title",componentId:"tmzwc-1"})(["margin:0;"]),d=r.ZP.svg.withConfig({displayName:"map__MapContainer",componentId:"tmzwc-2"})(["g{background-color:light-gray;fill:red;}border:1px solid black;.cboundary{stroke-width:0px;}"]),f=function(t){var e=t.title,n=t.countiesMap,r=(t.highlightedCounty,t.countySelector),i=t.data,l=(t.time,t.MapSettings),c=t.weekNum,f=t.past,m=l.scale,h=l.translate,g=l.width,w=l.height,y=(0,a.useRef)(null),x=o.FWi().scale(m).translate(h),k=o.l49().projection(x);return(0,a.useEffect)((function(){var t=o.Ys(y.current).attr("width",g).attr("height",w).append("g");t.append("g").style("stroke","black").style("stroke-width","0.5px").style("fill","#ffffffff").selectAll("path").data(s.zL(n,n.objects.states).features).enter().append("path").attr("d",k).attr("stateFips",(function(t){var e=t.id;return Number(e)})),t.append("g").selectAll("path").data(s.zL(n,n.objects.counties).features).enter().append("path").attr("d",k).attr("id",(function(t){var e=t.id;return"c"+Number(e)})).attr("class","cboundary").style("fill","#00000000").on("mouseout",(function(){r([-1,""])}))}),[]),(0,a.useEffect)((function(){i.forEach((function(t){var e,n,a=t.getLast(c),r=a.curr,i=a.last,l=a.weeks;r&&0!==r?(e=1===r?"#ff0000":"#0000ff",n=1):(e="#00000000",1===i?e="#ff0000":2===i&&(e="#0000ff"),n=f&&i>0&&l>0?Math.pow(4,-l):0);var s=o.Ys(y.current).select("#c"+t.fips);s.style("fill",e),s.style("fill-opacity",n)}))}),[c,f]),a.createElement(u,null,a.createElement(p,null,e),a.createElement(d,{ref:y}))},m=n(7329),h=n(9159),g=r.ZP.div.withConfig({displayName:"timeline__Container",componentId:"pa4pje-0"})(["width:60%;"]),w=r.ZP.svg.withConfig({displayName:"timeline__Slider",componentId:"pa4pje-1"})(["width:100%;"]),y=function(t){var e=t.week,n=t.setWeek,r=t.playing,i=t.setPlaying,l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=(0,a.useContext)(h.W).map((function(t){return function(t){return new Date(t+" PST")}(t)})),s=(0,m.Z)(Array(365).keys()).map((function(t){return{d:(e=c[0],n=t,new Date(e.getFullYear(),e.getMonth(),e.getDate()+n)),i:t};var e,n})).filter((function(t){return 1===t.d.getDate()})),u=(0,a.useRef)(null),p=o.Xf().domain([c[0],c[c.length-1]]).range([0,600]).clamp(!0),d=function(t){var e;t instanceof Date?(e=(0,m.Z)(Array(c.length).keys()).find((function(e){return c[e]>t||e===c.length-1||c[e]>=t&&0===e})),n(e)):e=t;var a=c[e];o.Ys(u.current).select("#handle").attr("cx",p(a)),o.Ys(u.current).select("#label").attr("x",p(a)).text(a.getMonth()+1+"/"+a.getDate())};return(0,a.useEffect)((function(){var t=o.Ys(u.current).append("svg").attr("width",700).attr("height",100).append("g").attr("transform","translate(30, 50)");t.insert("g").selectAll("text").data(s).enter().append("text").attr("x",(function(t){var e=t.d;return p(e)})).attr("y",30).attr("text-anchor","middle").text((function(t){var e=t.d;return l[e.getMonth()]})),t.append("text").attr("x",p(p.invert(590))).attr("y",30).text("2020");t.insert("circle").attr("id","handle").attr("r",9),t.append("text").attr("id","label").attr("text-anchor","middle").attr("transform","translate(0,-15)");t.append("line").attr("stroke","black").attr("stroke-width","10px").attr("stroke-opacity",.3).attr("stroke-linecap","round").attr("x1",p.range()[0]).attr("x2",p.range()[1]).select((function(){return this.parentNode.appendChild(this.cloneNode(!0))})).attr("stroke-width","100px").attr("stroke","transparent").call(o.ohM().on("start.interrupt",(function(){return t.interrupt()})).on("start drag",(function(t){i(!1),d(p.invert(t.x))})))}),[]),(0,a.useEffect)((function(){d(e)}),[e]),a.createElement(g,null,a.createElement("p",null,"Week: ",e,", ",c[e].toString()),a.createElement(w,{ref:u}),a.createElement("button",{onClick:function(){i(!r)}},"Play"))},x=r.ZP.div.withConfig({displayName:"mapView__Container",componentId:"sc-852ciw-0"})(["display:flex;flex-direction:column;align-items:center;"]),k=(r.ZP.p.withConfig({displayName:"mapView__Text",componentId:"sc-852ciw-1"})(["margin:0;width:100px;white-space:nowrap;"]),r.ZP.div.withConfig({displayName:"mapView__MapContainer",componentId:"sc-852ciw-2"})(["display:flex;flex-direction:row;justify-content:center;width:100%;flex-wrap:wrap;@media (max-width:770px){flex-wrap:wrap;}"]));function v(t){var e=t.selectedCounty,n=t.setSelectedCounty,r=t.MapSettings,i=t.time,o=(t.setTime,t.week),s=t.setWeek,u=(0,a.useState)(!1),p=u[0],d=u[1],m=(0,a.useContext)(c.z),h=m.mapData,g=m.mapTitles,w=(0,a.useState)(!1),v=w[0],C=w[1];return(0,a.useEffect)((function(){if(v){var t=setInterval((function(){o<51&&s(o+1)}),500);return function(){return clearInterval(t)}}}),[v,o]),a.createElement(x,null,a.createElement(k,null,g.map((function(t,c){return a.createElement(f,{key:c,title:t,countiesMap:l,highlightedCounty:e,countySelector:n,time:i,data:h?h[c]:null,weekNum:o,MapSettings:r,past:p})}))),a.createElement(y,{week:o,setWeek:s,playing:v,setPlaying:C}),a.createElement("div",null,a.createElement("button",{onClick:function(){o<51&&s(o+1),C(!1)}},"CLICK ME"),a.createElement("form",null,a.createElement("input",{type:"checkbox",id:"1",name:"here",value:"sad",onChange:function(){return d(!p)}}),a.createElement("label",{htmlFor:"1"},"Show Past Values"))))}var C=r.ZP.div.withConfig({displayName:"bivar__Container",componentId:"tzh0o4-0"})(["width:100%;display:flex;align-items:center;flex-direction:column;"]),E={width:380,height:250,translate:[190,125],scale:500},b=function(){var t=(0,a.useState)([-1,""]),e=t[0],n=t[1],r=(0,a.useState)([0,52]),l=r[0],c=r[1],o=(0,a.useState)(0),s=o[0],u=o[1];return a.createElement(i.Z,null,a.createElement(C,null,a.createElement(v,{MapSettings:E,selectedCounty:e,setSelectedCounty:n,time:l,setTime:c,week:s,setWeek:u})))}}}]);
//# sourceMappingURL=component---src-pages-bivar-tsx-3e8486d039b00f1a6561.js.map