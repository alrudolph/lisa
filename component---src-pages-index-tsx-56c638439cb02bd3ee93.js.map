{"version":3,"sources":["webpack://my-gatsby-site/./src/contexts/mapsContext.tsx","webpack://my-gatsby-site/./src/components/index/globalMoran.tsx","webpack://my-gatsby-site/./src/components/index/globalMoranView.tsx","webpack://my-gatsby-site/./src/components/index/examples/centerMap.tsx","webpack://my-gatsby-site/./src/components/index/examples/valueMap.tsx","webpack://my-gatsby-site/./src/components/index/mapExamples.tsx","webpack://my-gatsby-site/./src/pages/index.tsx"],"names":["MapsContext","createContext","Maps","children","states","topojson","countiesMap","features","counties","Provider","value","Container","styled","Title","Plot","GlobalMoran","title","data","margin","width","height","d3Container","useRef","useEffect","svg","d3","current","append","attr","x","domain","range","call","maxY","Math","min","max","map","item","minY","y","line","x1","y1","Number","style","datum","d","console","log","selectAll","enter","ref","GlobalMoranView","globalData","useContext","GlobalContext","mapTitles","LisaContext","col","i","key","Map","showFDR","edges","useStaticQuery","allUtahExampleCsv","translate","projection","scale","map_path","filter","id","floor","node","find","fips","class","transition","duration","blues","map_g","sheltered_in_place_7days_rolling_avg","text","county_path","centroid","MapContainer","TextContainer","Text","useState","setShowFDR","window","addEventListener","scrollY","selectedPage"],"mappings":"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","file":"component---src-pages-index-tsx-56c638439cb02bd3ee93.js","sourcesContent":["import React, { createContext } from \"react\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport countiesMap from \"us-atlas/counties-10m.json\";\n\nexport const MapsContext = createContext(null);\n\nexport const Maps = ({ children }) => {\n\n  const states = topojson.feature(countiesMap, countiesMap.objects.states).features\n  const counties = topojson.feature(countiesMap, countiesMap.objects.counties).features\n\n  return (\n    <MapsContext.Provider value={{ states, counties }}>\n      {children}\n    </MapsContext.Provider>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\nconst Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n`;\n\nconst Title = styled.h3``;\n\nconst Plot = styled.div`\n  height: 250px;\n  width: 370px;\n`;\n\ntype Props = {\n  title: string;\n  data: Array<number>;\n};\n\nexport default function GlobalMoran({ title, data }: Props) {\n  const margin = { top: 10, right: 30, bottom: 30, left: 30 };\n  const width = 370 - margin.left - margin.right;\n  const height = 250 - margin.top - margin.bottom;\n\n  const d3Container = useRef(null);\n\n  useEffect(() => {\n    const svg = d3\n      .select(d3Container.current)\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n    const x = d3.scaleLinear().domain([0, 52]).range([0, width]);\n    svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(0, ${height})`)\n      .call(d3.axisBottom(x));\n\n    const maxY = Math.min(Math.max(...data.map((item) => item[1])) * 1.05, 1);\n    const minY = Math.max(Math.min(...data.map((item) => item[1])) * 0.95, 0);\n\n    const y = d3.scaleLinear().domain([minY, maxY]).range([height, 0]);\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    const line = d3\n      .line()\n      .x(({ x1 }) => x(x1))\n      .y(({ y1 }) => y(Number(y1)));\n    const lineWeek = 11;\n\n    // VERTICAL LINE:\n    svg\n      .append(\"path\")\n      .attr(\n        \"d\",\n        line([\n          { x1: lineWeek, y1: minY },\n          { x1: lineWeek, y1: maxY },\n        ])\n      )\n      .style(\"stroke\", \"gray\")\n      .style(\"stroke-width\", 2);\n\n    // LINES:\n    svg\n      .append(\"path\")\n      .datum(\n        data.map(([x1, y1]) => {\n          return { x1, y1 };\n        })\n      )\n      .style(\"stroke\", \"gray\")\n      .style(\"stroke-width\", 2)\n      .style(\"stroke-opacity\", 0.8)\n      .style(\"stroke-dasharray\", \"3, 3\")\n      .style(\"fill\", \"none\")\n      .attr(\"d\", (d) => {\n        console.log(d);\n        return line(d);\n      });\n\n    // SCATTER:\n    svg\n      .append(\"g\")\n      .selectAll(\"dot\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"cx\", (d) => x(d[0]))\n      .attr(\"cy\", (d) => y(d[1]))\n      .attr(\"r\", 4.5)\n      .style(\"fill\", \"blue\")\n      .style(\"fill-opacity\", 0.7)\n  }, []);\n\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <Plot ref={d3Container}></Plot>\n    </Container>\n  );\n}\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport GlobalMoran from \"./globalMoran\";\nimport { GlobalContext } from \"../../contexts/globalContext\";\nimport { LisaContext } from \"../../contexts/lisaContext\";\n\nconst Container = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n    width: 100%;\n    justify-content: space-around;\n`;\n\nexport default function GlobalMoranView() {\n  const globalData = useContext(GlobalContext);\n  const { mapTitles } = useContext(LisaContext);\n\n  const colTitles = [\"cm\", \"cs\", \"sm\", \"ss\"];\n\n  return (\n    <Container>\n      {colTitles.map((col, i) => {\n        return (\n          <GlobalMoran\n            key={i}\n            title={mapTitles[i]}\n            data={globalData.map((item, i) => [i, item[col]])}\n          />\n        );\n      })}\n    </Container>\n  );\n}\n","import React, { useRef, useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { graphql, useStaticQuery } from \"gatsby\";\n\nimport * as d3 from \"d3\";\n\nimport { MapsContext } from \"../../../contexts/mapsContext\";\n\nconst Container = styled.div`\n  width: 260px;\n  padding: 5px;\n`;\n\nconst Map = styled.svg`\n  width: 260px;\n  height: 320px;\n`;\n\ntype Props = {\n  showFDR: boolean;\n};\n\nconst CenterMap = ({ showFDR }: Props) => {\n  const {\n    allUtahExampleCsv: { edges },\n  } = useStaticQuery(graphql`\n    query CenterMapQuery {\n      allUtahExampleCsv {\n        edges {\n          node {\n            class\n            fips\n          }\n        }\n      }\n    }\n  `);\n\n  const width = 260;\n  const height = 320;\n  const translate: [number, number] = [width * 2 + 210, (height * 13) / 16];\n  const scale = 3000;\n\n  const d3Container = useRef(null);\n\n  const { counties } = useContext(MapsContext);\n\n  useEffect(() => {\n    const projection = d3.geoAlbers().scale(scale).translate(translate);\n    const map_path = d3.geoPath().projection(projection);\n\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties.filter(({ id }) => Math.floor(id / 1000) == 49))\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      // .style(\"stroke-width\", 0)\n      .style(\"stroke\", \"#D3D3D3\")\n      .style(\"fill\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips)\n        );\n        return Number(node.class) === 0 ? \"#FFFFFF00\" : \"#5768ac\";\n      })\n      .style(\"fill-opacity\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips) // have to convert to numbers for decimal\n        );\n        return node.class !== \"0\" ? 0.5 : 0;\n      });\n  }, []);\n\n  useEffect(() => {\n    d3.select(d3Container.current)\n      .selectAll(\".cboundary\")\n      .transition()\n      .duration(1000)\n      .style(\"fill-opacity\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips) // have to convert to numbers for decimal\n        );\n        return showFDR\n          ? [0, 0.5, 1][Number(node.class) / 2]\n          : Number(node.class !== \"0\") * 0.5;\n      });\n  }, [showFDR]);\n\n  return (\n    <Container>\n      <Map ref={d3Container} />\n      <p>\n        Counties classified as cold spots in Cuebiq % Sheltered for Utah\n        4/13-4/19. The ligher shade of purple shows significance at alpha=0.05\n        for the simulated p-values. The darker shade of purple are the counties\n        that are significant using FDR.\n      </p>\n    </Container>\n  );\n};\n\nexport default CenterMap;\n","import React, { useRef, useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { graphql, useStaticQuery } from \"gatsby\";\n\nimport * as d3 from \"d3\";\n\nimport { MapsContext } from \"../../../contexts/mapsContext\";\n\nconst Container = styled.div`\n  width: 260px;\n  padding: 5px;\n`;\n\nconst Map = styled.svg`\n  width: 260px;\n  height: 320px;\n`;\n\nconst ValueMap = () => {\n  const {\n    allUtahExampleCsv: { edges },\n  } = useStaticQuery(graphql`\n    query ValueMapQuery {\n      allUtahExampleCsv {\n        edges {\n          node {\n            sheltered_in_place_7days_rolling_avg\n            fips\n          }\n        }\n      }\n    }\n  `);\n\n  const width = 260;\n  const height = 320;\n  const translate: [number, number] = [width * 2 + 210, (height * 13) / 16];\n  const scale = 3000;\n\n  const d3Container = useRef(null);\n\n  const { counties } = useContext(MapsContext);\n\n  const blues = d3.scaleSequentialPow(d3.interpolateBlues);\n\n  useEffect(() => {\n    const projection = d3.geoAlbers().scale(scale).translate(translate);\n    const map_path = d3.geoPath().projection(projection);\n\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties.filter(({ id }) => Math.floor(id / 1000) == 49))\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      // .style(\"stroke-width\", 0)\n      .style(\"stroke\", \"#D3D3D3\")\n      .style(\"fill\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips)\n        );\n        return blues(1 - (node.sheltered_in_place_7days_rolling_avg - 28) / 20);\n      })\n\n      \n    map_g\n      .append(\"g\")\n      .selectAll(\"label\")\n      .data(counties.filter(({ id }) => Math.floor(id / 1000) == 49))\n      .enter()\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .text(({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips)\n        );\n        return node.sheltered_in_place_7days_rolling_avg + \"%\";\n      })\n      .style(\"fill\", ({ id }) => {\n        const { node } = edges.find(\n          ({ node: { fips } }) => Number(id) === Number(fips)\n        );\n        return blues((node.sheltered_in_place_7days_rolling_avg - 10) / 25);\n      })\n      .style(\"font-size\", 12)\n      .attr(\"transform\", ({ id }) => {\n        const county_path = d3.select(`#c${id}`).datum();\n        return `translate(${map_path.centroid(county_path)})`;\n      })\n  }, []);\n\n  return (\n    <Container>\n      <Map ref={d3Container} />\n      <p>\n        Cuebiq % Sheltered for Utah 4/13-4/19. Darker shades of blue indicate a\n        lower percentage of the population sheltering.\n      </p>\n    </Container>\n  );\n};\n\nexport default ValueMap;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport CenterMap from \"./examples/centerMap\";\nimport ValueMap from \"./examples/valueMap\";\nimport { Maps } from \"../../contexts/mapsContext\";\n\ninterface Props {\n  showFDR: boolean;\n}\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: space-between;\n  @media (max-width: 800px) {\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n`;\n\nconst MapContainer = styled.div`\n  display: flex;\n\n  @media (max-width: 900px) {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n`;\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 100%;\n\n  & > h1 {\n    margin: 10px 5px 0 5px;\n  }\n`;\n\nconst Text = styled.p`\n  margin: 0 5px;\n`;\nconst MapExamples = ({ showFDR }: Props) => {\n  return (\n    <Container>\n      <Maps>\n        <MapContainer>\n          <TextContainer>\n            <Text>Description of what's going on. asJDKLjs ajskldajd sklajd lajsdklsa jdlksajd alksjd klasjdklas jdaskl</Text>\n          </TextContainer>\n          <ValueMap />\n          <CenterMap showFDR={showFDR} />\n        </MapContainer>\n      </Maps>\n    </Container>\n  );\n};\n\nexport default MapExamples;\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"gatsby\";\n\nimport Page from \"../components/page\";\n\nimport GlobalMoranView from \"../components/index/globalMoranView\"\nimport MapExamples from \"../components/index/mapExamples\";\n{\n  /* <Trivariate\n      data={[\n        format(cue_mobility),\n        format(cue_sheltered),\n        format(safe_mobility),\n        format(safe_sheltered),\n      ]}\n    /> */\n}\n\nimport dates from \"../data/dates.json\";\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 100%;\n\n  & > h1 {\n    margin: 10px 5px 0 5px;\n  }\n`;\n\nconst Text = styled.p`\n  margin: 0 5px;\n`;\n\nconst Index = () => {\n  const [showFDR, setShowFDR] = useState(false);\n\n  useEffect(() => {\n    if (typeof window !== `undefined`) {\n      window.addEventListener(\"scroll\", () => {\n        return setShowFDR(window.scrollY > 200);\n      });\n    }\n  }, []);\n\n  return (\n    <Page selectedPage=\"About\">\n      <TextContainer>\n        <h1>About This Website</h1>\n        <Text>What this is showing and stuff</Text>\n        <h1>Data</h1>\n        <Text>The Data we have</Text>\n        <h1>Global Moran</h1>\n        <GlobalMoranView />\n        <Text>We see spatial clustering every week</Text>\n        <h1>LISA</h1>\n        <MapExamples showFDR={showFDR} />\n        {/* \n        <Text>The about page is still under construction. Please see one of the individual visualization pages.</Text>\n        <ul>\n          <li><Link to=\"/animated\"><h2>Animated Choropleth Maps</h2></Link></li>\n          <li><Link to=\"/static\"><h2>Static Choropleth Maps</h2></Link></li>\n          <li><Link to=\"/scatter\"><h2>Scatter Plot Representations</h2></Link></li>\n        </ul>*/}\n      </TextContainer>\n    </Page>\n  );\n};\n\nexport default Index;\n"],"sourceRoot":""}