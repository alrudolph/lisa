{"version":3,"sources":["webpack://my-gatsby-site/./src/components/trivar/cards.tsx","webpack://my-gatsby-site/./src/contexts/mapsContext.tsx","webpack://my-gatsby-site/./src/components/trivar/map.tsx","webpack://my-gatsby-site/./src/components/trivar/mapView.tsx","webpack://my-gatsby-site/./src/components/trivar/mapExample.tsx","webpack://my-gatsby-site/./src/components/trivar/legendDescription.tsx","webpack://my-gatsby-site/./src/pages/interactive.tsx","webpack://my-gatsby-site/./src/utility/mapZoom.ts"],"names":["Container","styled","Title","Text","Row","Card","title","hcount","ccount","hrecent","crecent","MapsContext","createContext","Maps","children","states","topojson","countiesMap","features","counties","Provider","value","MapContainer","county","border","getStateFips","fips","Number","String","slice","MapSettings","highlightedState","highlightedCounty","addState","stateSelector","countySelector","data","time","colorScales","hotScale","coldScale","getRadius","width","height","translate","scale","d3Container","useRef","projection","d3","map_path","useContext","useEffect","map_g","current","attr","append","MapZoom","style","selectAll","enter","id","objects","geometries","filter","val","properties","name","on","county_path","datum","centroid","sparse","recent","hot","cold","event","this","getAttribute","_","ref","Divider","TextContainerArea","TextContainer","MapControls","Button","LegendContainer","Legend","Cards","MapView","selectedCounty","setSelectedCounty","selectedState","setSelectedState","setTime","LisaContext","mapData","mapTitles","useState","Array","length","mapZoom","setMapZoom","zoomScale","setZoomScale","reset","zooming","forEach","m","currId","select","domain","d","Sparse","count","n","Math","max","countContainer","maxHeight","maxWidth","margin","min","pointData","x","r","remove","xAxis","range","yAxis","call","ticks","tickFormat","i","text","recentContainer","weekValues","keys","map","w","c","onClick","key","mapNum","Map","step","floor","currentStep","setCurrentStep","transition","duration","random","ControlsContainer","ListMapContainer","StepList","LegendDescription","setLegendStep","legendStep","selectedPage","to","path","g","active","_d","bounds","x0","y0","x1","y1","dx","dy","y","scaleNew","translateNew","clicked","stateId","node","classed"],"mappings":"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","file":"component---src-pages-interactive-tsx-7b185fb4c20fb0e7a38a.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  border-radius: 10px;\n  background-color: lightgray;\n  width: 160px;\n  margin: 5px;\n  padding: 5px;\n`;\n\nconst Title = styled.h3`\n  margin: 0 0 10px 0;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\ntype Props = {\n  title: string;\n  hcount: number;\n  ccount: number;\n  hrecent: number;\n  crecent: number;\n};\n \nexport default function Card({\n  title,\n  hcount,\n  ccount,\n  hrecent,\n  crecent,\n}: Props) {\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <Row>\n        <Text># Hot Spots:</Text> <Text>{hcount}</Text>\n      </Row>\n      <Row>\n        <Text># Cold Spots:</Text><Text>{ccount}</Text>\n      </Row>\n      <Row>\n        <Text>Last Hot Spot:</Text><Text>{hrecent}</Text>\n      </Row>\n      <Row>\n        <Text>Last Cold Spot:</Text><Text>{crecent}</Text>\n      </Row>\n    </Container>\n  );\n}\n","import React, { createContext } from \"react\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport countiesMap from \"us-atlas/counties-10m.json\";\n\nexport const MapsContext = createContext(null);\n\nexport const Maps = ({ children }) => {\n\n  const states = topojson.feature(countiesMap, countiesMap.objects.states).features\n  const counties = topojson.feature(countiesMap, countiesMap.objects.counties).features\n\n  return (\n    <MapsContext.Provider value={{ states, counties }}>\n      {children}\n    </MapsContext.Provider>\n  );\n};\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport { MapsContext } from \"../../contexts/mapsContext\";\nimport MapZoom from \"../../utility/mapZoom\";\nimport Sparse from \"../../utility/sparse\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  align-items: center;\n  margin: 10px 20px;\n\n  @media (max-width: 830px) {\n    margin: 10px 5px;\n  }\n  @media (max-width: 700px) {\n    margin: 0;\n  }\n`;\nconst Title = styled.h3`\n  margin: 0;\n`;\n\nconst MapContainer = styled.svg`\n  g {\n    background-color: light-gray;\n    fill: red;\n  }\n\n  /* use can use an attribute selector but idk how to select on all maps */\n  #c${({ county }: { county: number }) => county}.cboundary {\n    stroke: black;\n    stroke-width: 0.25px;\n  }\n\n  .cboundary {\n    stroke-width: 0px;\n    fill: #ffffff00;\n  }\n\n  .bubble {\n    stroke-width: 0;\n  }\n\n  /*\n  * > path:hover, circle:hover {\n    cursor: pointer;\n  }\n  */\n\n  border: 1px solid\n    ${({ border }: { border: boolean }) => (border ? \"black\" : \"white\")};\n`;\n\nconst getStateFips = (fips: number): number => {\n  return Number(String(fips).slice(0, -3));\n};\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ntype Data = Array<Sparse>;\n\ninterface Props {\n  title: string;\n  MapSettings: MapSettings;\n  countiesMap: any;\n  highlightedState: [number, string];\n  highlightedCounty: [number, string];\n  addState: (m: MapZoom) => void;\n  stateSelector: ([s, s1]: [number, string], b?: boolean) => boolean;\n  countySelector: ([s, s1]: [number, string]) => void;\n  data: Data;\n  time: [number, number];\n  colorScales: [any, any];\n  getRadius: (g: Sparse) => number;\n}\n\nconst Map = ({\n  title,\n  MapSettings,\n  countiesMap,\n  highlightedState,\n  highlightedCounty,\n  addState,\n  stateSelector,\n  countySelector,\n  data,\n  time,\n  colorScales: [hotScale, coldScale],\n  getRadius,\n}: Props) => {\n  const { width, height, translate, scale } = MapSettings;\n\n  const d3Container = useRef(null);\n\n  const projection = d3.geoAlbers().scale(scale).translate(translate);\n  const map_path = d3.geoPath().projection(projection);\n\n  const { counties, states } = useContext(MapsContext);\n\n  useEffect(() => {\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    addState(new MapZoom(map_path, map_g, width, height, highlightedState[0]));\n\n    // States:\n    map_g\n      .append(\"g\")\n      .style(\"stroke\", \"black\")\n      .style(\"stroke-width\", \"0.5px\")\n      .style(\"fill\", \"#ffffffff\")\n      .selectAll(\"path\")\n      .data(states)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateFips\", ({ id }) => Number(id));\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateName\", ({ id }) => {\n        return countiesMap.objects.states.geometries.filter((val) => {\n          return getStateFips(id) === Number(val.id);\n        })[0].properties.name;\n      })\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      .on(\"mouseout\", () => {\n        countySelector([-1, \"\"]);\n      });\n\n    // County Circles:\n    map_g\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"bubble\")\n      /* \n        HAVE TO LOAD COUNTY AND STATE NAME TO BUBBLES HERE:\n          MAYBE PUT THOSE AS SPARSE VECTOR INFO\n      */\n      .attr(\"countyName\", ({ fips }) => {\n        return countiesMap.objects.counties.geometries.filter(({ id }) => {\n          return fips === Number(id);\n        })[0].properties.name;\n      })\n      .attr(\"stateName\", ({ fips }) => {\n        return countiesMap.objects.states.geometries.filter(({ id }) => {\n          return getStateFips(fips) === Number(id);\n        })[0].properties.name;\n      })\n      .attr(\"transform\", ({ fips }) => {\n        const county_path = d3.select(`#c${fips}`).datum();\n        return `translate(${map_path.centroid(county_path)})`;\n      })\n      .on(\"mouseout\", () => {\n        countySelector([-1, \"\"]);\n      });\n  }, []);\n\n  useEffect(() => {\n    d3.select(d3Container.current)\n      .selectAll(\".bubble\")\n      .attr(\"r\", getRadius)\n      .style(\"fill\", (sparse) => {\n        const [hot, cold] = sparse.recent(...time);\n        return hot > cold ? hotScale(hot) : coldScale(cold);\n      });\n  }, [time]);\n\n  useEffect(() => {\n    d3.select(d3Container.current)\n      .selectAll(\".cboundary\")\n      .on(\"click\", function (event, { id }) {\n        stateSelector([getStateFips(id), this.getAttribute(\"stateName\")]);\n      });\n\n    d3.select(d3Container.current)\n      .selectAll(\".cboundary\")\n      .on(\"mouseover\", function (event, { id, properties: { name } }) {\n        if (highlightedState[1] !== \"\") {\n          countySelector([Number(id), name]);\n        }\n      });\n\n    d3.select(d3Container.current)\n      .selectAll(\".bubble\")\n      .on(\"mouseover\", function (_, { fips }) {\n        if (!highlightedState) {\n          return;\n        }\n        // console.log(getStateFips(d.fips), highlightedState[0])\n        if (highlightedState[1] !== \"\") {\n          countySelector([fips, this.getAttribute(\"countyName\")]);\n        }\n      })\n      .on(\"click\", function (event, { fips }) {\n        stateSelector([getStateFips(fips), this.getAttribute(\"stateName\")]);\n      })\n      .style(\"fill-opacity\", ({ fips }) => {\n        return highlightedState[0] === -1 ||\n          getStateFips(fips) === highlightedState[0]\n          ? 1\n          : 0.2;\n      });\n  }, [highlightedState]);\n\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <MapContainer\n        ref={d3Container}\n        county={highlightedCounty[0]}\n        border={highlightedState[0] !== -1}\n      />\n    </Container>\n  );\n};\n\nexport default Map;\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\n//import us from \"us-atlas/nation-10m.json\"\nimport counties from \"us-atlas/counties-10m.json\";\nimport states from \"us-atlas/states-10m.json\";\n//import data from \"../data/counties.json\";\n\nimport MapZoom from \"../../utility/mapZoom\";\nimport Sparse from \"../../utility/sparse\";\nimport Card from \"./cards\";\nimport Map from \"./map\";\nimport { LisaContext } from \"../../contexts/lisaContext\";\n\nimport { Maps } from \"../../contexts/mapsContext\";\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n`;\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\n\nconst TextContainerArea = styled.div`\n  width: 100%;\n`;\n\nconst TextContainer = styled.div`\n  margin: 0 15px;\n  display: flex;\n  justify-content: space-between;\n\n  @media (max-width: 500px) {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n`;\n\nconst MapControls = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst MapContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  flex-wrap: wrap;\n\n  @media (max-width: 770px) {\n    flex-wrap: wrap;\n  }\n`;\n\nconst Button = styled.button`\n  border-radius: 10px;\n  height: 30px;\n  width: 60px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: center;\n\n  width: 100%;\n  flex-wrap: wrap;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  width: 100%;\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n  white-space: nowrap;\n`;\n\nconst LegendContainer = styled.div`\n  display: flex;\n  width: 85%;\n  justify-content: space-between;\n  @media (max-width: 770px) {\n    width: 100%;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n\n  font-size: 16pt;\n`;\n\nconst Legend = styled.div`\n  margin: 10px 0;\n  width: 380px;\n  display: flex;\n  justify-content: center;\n  align-itms: center;\n`;\n\nconst Cards = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  flex-wrap: wrap;\n`;\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ntype Data = Array<Sparse>;\n\ntype Props = {\n  MapSettings: MapSettings;\n  selectedCounty: [number, string];\n  setSelectedCounty: ([s1, s2]: [number, string]) => void;\n  selectedState: [number, string];\n  setSelectedState: ([s1, s2]: [number, string]) => void;\n  time: [number, number];\n  setTime: ([n1, n2]: [number, number]) => void;\n};\n\nconst getStateFips = (fips: number): number => {\n  return Number(String(fips).slice(0, -3));\n};\n\nexport default function MapView({\n  MapSettings,\n  selectedCounty,\n  setSelectedCounty,\n  selectedState,\n  setSelectedState,\n  time,\n  setTime,\n}: Props) {\n  const { mapData, mapTitles } = useContext(LisaContext);\n\n  const [mapZoom, setMapZoom] = useState(Array<MapZoom>(mapTitles.length));\n\n  const addState = (m: MapZoom, mapNum: number) => {\n    mapZoom[mapNum] = m;\n    setMapZoom(mapZoom);\n  };\n\n  const [zoomScale, setZoomScale] = useState(1);\n\n  const stateSelector = (\n    [id, name]: [number, string],\n    reset: boolean = false\n  ) => {\n    let zooming: boolean;\n\n    mapZoom.forEach((m) => {\n      if (!reset && id !== m.currId && id !== -1) {\n        setZoomScale(m.select(id));\n        zooming = true;\n      } else {\n        m.reset();\n        setZoomScale(1);\n        zooming = false;\n      }\n    });\n\n    if (zooming) {\n      setSelectedState([id, name]);\n      return true;\n    } else {\n      setSelectedState([-1, \"\"]);\n      return false;\n    }\n  };\n\n  const countySelector = ([id, name]: [number, string]) => {\n    if (id === -1 || getStateFips(id) === selectedState[0]) {\n      setSelectedCounty([id, name]);\n    }\n  };\n\n  const coldScale = d3\n    .scaleSequentialPow(d3.interpolateBlues)\n    .domain([...time]);\n  const hotScale = d3.scaleSequentialPow(d3.interpolateReds).domain([...time]);\n\n  const getRadius = (d: Sparse | number) => {\n    const val = d instanceof Sparse ? d.count(...time) : [d];\n    const n = d instanceof Sparse ? d.n : time[1];\n    return (30 + Math.max(...val)) / n;\n  };\n\n  const countContainer = useRef(null);\n\n  const maxHeight = 100;\n  const maxWidth = 370;\n  const margin = [20, 20];\n\n  useEffect(() => {\n    const width = Math.min(maxWidth, 100 + zoomScale * 10) - 2 * margin[0];\n    const height = Math.min(maxHeight, 40 + zoomScale * 2);\n\n    const pointData = [\n      { x: 1, r: 1 },\n      { x: 2, r: 5 },\n      { x: 3, r: 10 },\n      { x: 4, r: 20 },\n      { x: 5, r: 52 },\n    ];\n\n    d3.select(countContainer.current).selectAll(\"*\").remove();\n\n    const map_g = d3\n      .select(countContainer.current)\n      .style(\"width\", width + (7 / 2) * margin[0])\n      .style(\"height\", height + 2 * margin[1])\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`);\n\n    const xAxis = d3\n      .scaleLinear()\n      .domain([1, pointData[pointData.length - 1].x])\n      .range([0, width]);\n    const yAxis = d3.scaleLinear().domain([0, 1]).range([height, 0]);\n\n    map_g\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        `translate(0,${(margin[1] * 3) / 2 + (zoomScale * 5) / 2})`\n      )\n      .call(\n        d3\n          .axisBottom(xAxis)\n          .ticks(5)\n          .tickFormat((i) => String(pointData[i - 1].r))\n      );\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`)\n      .call(d3.axisLeft(yAxis))\n      .style(\"display\", \"none\");\n\n    map_g\n      .selectAll(\"dot\")\n      .remove()\n      .data(pointData)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"point\")\n      .attr(\"cx\", ({ x }) => xAxis(x))\n      .attr(\"cy\", () => yAxis(0.5))\n      .attr(\"r\", ({ r }) => getRadius(r) * zoomScale)\n      .style(\"fill\", \"black\");\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", width / 2 + margin[0] + 10)\n      .attr(\"y\", height + (margin[1] * 3) / 2 + zoomScale / 4)\n      .text(\"Count\");\n  }, [time, zoomScale]);\n\n  const recentContainer = useRef(null);\n\n  const circleWidth = 40;\n\n  useEffect(() => {\n    d3.select(recentContainer.current).selectAll(\"*\").remove();\n\n    const leftMargin = 30;\n\n    const map_g = d3\n      .select(recentContainer.current)\n      .style(\"width\", maxWidth)\n      .style(\"height\", maxHeight)\n      // .style(\"background-color\", \"lightgray\")\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        `translate(${leftMargin + margin[0] + circleWidth},0)`\n      );\n\n    const weekValues = [1, 5, 10, 15, 20, 25, 30, 40, 46, 52];\n\n    const pointData = [...Array(weekValues.length * 2).keys()].map((i) => {\n      return {\n        x: (i % weekValues.length) + 1,\n        w: weekValues[i % weekValues.length],\n        c: i < weekValues.length ? 1 : 2,\n      };\n    });\n\n    const xAxis = d3\n      .scaleLinear()\n      .domain([1, weekValues.length])\n      .range([0, maxWidth - circleWidth - 2 * margin[0] - leftMargin]);\n    const yAxis = d3\n      .scaleLinear()\n      .domain([0, 3])\n      .range([maxHeight - 2 * margin[1], 0]);\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(0,${margin[1] + (maxHeight * 5) / 12})`)\n      .call(\n        d3\n          .axisBottom(xAxis)\n          .ticks(5)\n          .tickFormat((i) => String(pointData[i - 1].w))\n      );\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`)\n      .call(d3.axisLeft(yAxis))\n      .style(\"display\", \"none\");\n\n    map_g\n      .selectAll(\"dot\")\n      .remove()\n      .data(pointData)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"point\")\n      .attr(\"cx\", ({ x }) => xAxis(x))\n      .attr(\"cy\", ({ c }) => yAxis(c))\n      .attr(\"r\", () => 9)\n      .style(\"fill\", ({ c, w }) => (c === 1 ? hotScale(w) : coldScale(w)));\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", maxWidth / 2 + leftMargin - circleWidth)\n      .attr(\"y\", (maxHeight * 19) / 20)\n      .text(\"Week Number\");\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", -leftMargin / 2)\n      .attr(\"y\", maxHeight / 2 - 5)\n      .text(\"Hotspots\")\n      .style(\"font-size\", \"12pt\");\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", -leftMargin / 2)\n      .attr(\"y\", maxHeight / 4)\n      .text(\"Coldspots\")\n      .style(\"font-size\", \"12pt\");\n  }, [time, zoomScale]);\n\n  // useEffect(() => {\n  //   d3\n  //     .select(d3Container.current)\n  //     .selectAll(\".point\")\n  //     .attr(\"r\", ({ r }) => getRadius(r) * zoomScale)\n  // }, [time, zoomScale])\n\n  return (\n    <Container>\n      <TextContainerArea>\n        <TextContainer>\n          {selectedState[0] !== -1 ? (\n            <>\n              <MapControls>\n                <Title>Selected State: {selectedState[1]}</Title>\n                <Text>\n                  Highlight over a county to read its specific values.\n                </Text>\n              </MapControls>\n              <Button\n                onClick={() => {\n                  stateSelector([-1, \"\"], true);\n                }}\n              >\n                Reset\n              </Button>\n            </>\n          ) : (\n            <Text>\n              Click a state on the map to zoom in and see county specific\n              information.\n            </Text>\n          )}\n        </TextContainer>\n      </TextContainerArea>\n      <Divider />\n      <Maps>\n        <MapContainer>\n          {mapTitles.map((title, i) => {\n            return (\n              <Map\n                key={i}\n                MapSettings={MapSettings}\n                title={/*[\"a\", \"b\", \"c\", \"d\"][i] + \") \" +*/ title}\n                countiesMap={counties}\n                highlightedCounty={selectedCounty}\n                highlightedState={selectedState}\n                addState={(m: MapZoom) => addState(m, i)}\n                stateSelector={stateSelector}\n                countySelector={countySelector}\n                time={time}\n                data={mapData ? mapData[i] : null}\n                colorScales={[hotScale, coldScale]}\n                getRadius={getRadius}\n              />\n            );\n          })}\n        </MapContainer>\n      </Maps>\n      <Row>\n        {selectedCounty[1] ? (\n          <Title>Selected County: {selectedCounty[1]} County</Title>\n        ) : null}\n      </Row>\n      <Cards>\n        {selectedCounty[0] !== -1\n          ? [0, 2, 1, 3].map((i) => {\n              const county = mapData\n                ? mapData[i].filter(\n                    (d) => Number(d.fips) === Number(selectedCounty[0])\n                  )[0]\n                : false;\n\n              const [hcount, ccount] = county ? county.count(...time) : [0, 0];\n              const [hrecent, crecent] = county\n                ? county.recent(...time)\n                : [0, 0];\n\n              return (\n                <Card\n                  key={i}\n                  title={mapTitles[i]}\n                  hcount={hcount}\n                  ccount={ccount}\n                  hrecent={hrecent}\n                  crecent={crecent}\n                />\n              );\n            })\n          : null}\n      </Cards>\n      <LegendContainer>\n        <Legend>\n          <svg ref={recentContainer} />\n        </Legend>\n        <Legend>\n          <svg ref={countContainer} />\n        </Legend>\n      </LegendContainer>\n    </Container>\n  );\n}\n","import React, { useRef, useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { graphql, useStaticQuery } from \"gatsby\";\n\nimport * as d3 from \"d3\";\n\nimport { MapsContext } from \"../../contexts/mapsContext\";\nimport { LisaContext } from \"../../contexts/lisaContext\";\nimport Sparse from \"../../utility/sparse\";\n\nconst Container = styled.div``;\n\nconst Map = styled.svg`\n  width: 350px;\n  height: 250px;\n`;\n\nconst getRandomX = () => 10 * (Math.random() - 0.5);\nconst getRandomY = () => 50 * (Math.random() - 0.5);\n\ntype Props = {\n  step: number;\n};\n\nconst MapExample = ({ step }: Props) => {\n  const width = 280;\n  const height = 250;\n  const translate: [number, number] = [width + 10 + 25, (height * 7) / 4 - 10];\n  const scale = 3000;\n\n  const d3Container = useRef(null);\n\n  const { counties } = useContext(MapsContext);\n  const { mapData, mapTitles } = useContext(LisaContext);\n\n  const data = mapData[3].filter(({ fips }) => Math.floor(fips / 1000) == 46);\n\n  const time = [0, 52];\n\n  const coldScale = d3\n    .scaleSequentialPow(d3.interpolateBlues)\n    .domain([...time]);\n  const hotScale = d3.scaleSequentialPow(d3.interpolateReds).domain([...time]);\n\n  const getRadius = (d: Sparse) => {\n    const val = d.count();\n    const n = d.n;\n    return ((10 + Math.max(...val)) / n) * 12;\n  };\n\n  const projection = d3.geoAlbers().scale(scale).translate(translate);\n  const map_path = d3.geoPath().projection(projection);\n\n  const xAxis = d3.scaleLinear().domain([1, 52]).range([0, 200]);\n  const yAxis = d3\n    .scaleLinear()\n    .domain([0, 2])\n    .range([height / 4, 0]);\n\n  useEffect(() => {\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 5 + 25},${height / 2})`)\n      .attr(\"id\", \"xaxis\")\n      .call(\n        d3\n          .axisBottom(xAxis)\n          //   .ticks(5)\n          .tickFormat((i) => String(i))\n      )\n      .attr(\"display\", \"none\");\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 5 + 25},${height / 4})`)\n      .call(d3.axisLeft(yAxis))\n      .attr(\"display\", \"none\");\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties.filter(({ id }) => Math.floor(id / 1000) == 46))\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      // .style(\"stroke-width\", 0)\n      .style(\"stroke\", \"#D3D3D3\")\n      .style(\"fill\", \"#FFFFFF00\");\n\n    map_g\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"bubble\")\n      .attr(\"r\", 4)\n      .attr(\"transform\", ({ fips }) => {\n        const county_path = d3.select(`#c${fips}`).datum();\n        return `translate(${map_path.centroid(county_path)})`;\n      })\n      .style(\"fill\", \"#d3d3d3\");\n  }, []);\n\n  const [currentStep, setCurrentStep] = useState(1);\n\n  useEffect(() => {\n    if (step === 1) {\n      if (currentStep === 2) {\n        d3.select(d3Container.current)\n          .selectAll(\".bubble\")\n          .transition()\n          .style(\"fill\", \"#d3d3d3\")\n          .duration(2000);\n      }\n    } else if (step === 2) {\n      if (currentStep === 1) {\n        d3.select(d3Container.current)\n          .selectAll(\".bubble\")\n          .transition()\n          .style(\"fill\", (sparse) => {\n            const [hot, cold] = sparse.recent(...time);\n            return hot > cold ? \"red\" : \"blue\";\n          })\n          .duration(2000);\n      }\n\n      if (currentStep === 3) {\n        d3.select(d3Container.current)\n          .selectAll(\".bubble\")\n          .transition()\n          .style(\"fill\", (sparse) => {\n            const [hot, cold] = sparse.recent(...time);\n            return hot > cold ? \"red\" : \"blue\";\n          })\n          .attr(\"transform\", (d) => {\n            const [hot, cold] = d.recent(...time);\n            return `translate(${\n              xAxis(1 + (hot > cold ? hot : cold)) + getRandomX() + width / 5\n            }, ${yAxis(hot > cold ? 1 : 2) + height / 4 + getRandomY()})`;\n          })\n          .duration(1000);\n\n        d3.select(d3Container.current)\n          .select(\"#xaxis\")\n          .transition()\n          .attr(\"display\", \"none\")\n          .duration(2000);\n      }\n    } else if (step === 3) {\n      if (currentStep === 2) {\n        d3.select(d3Container.current)\n          .selectAll(\".cboundary\")\n          .style(\"stroke-opacity\", 0);\n        d3.select(d3Container.current)\n          .select(\"#xaxis\")\n          .transition()\n          .attr(\"display\", \"block\")\n          .duration(2000);\n\n        d3.select(d3Container.current)\n          .selectAll(\".bubble\")\n          .transition()\n          .style(\"fill\", (sparse) => {\n            const [hot, cold] = sparse.recent(...time);\n            return hot > cold ? hotScale(hot) : coldScale(cold);\n          })\n          .attr(\"transform\", (d) => {\n            const [hot, cold] = d.recent(...time);\n            return `translate(${xAxis(hot > cold ? hot : cold) + width / 5 + 25}, ${\n              yAxis(hot > cold ? 1 : 2) + height / 4\n            })`;\n          })\n          .duration(3000);\n      } else if (currentStep === 4) {\n        d3.select(d3Container.current)\n          .selectAll(\".bubble\")\n          .transition()\n          .attr(\"r\", 4)\n          .duration(2000);\n      }\n    } else if (step === 4) {\n      if (currentStep === 3) {\n        d3.select(d3Container.current)\n          .selectAll(\".bubble\")\n          .transition()\n          .attr(\"r\", getRadius)\n          .duration(2000);\n      }\n      if (currentStep === 5) {\n        d3.select(d3Container.current)\n          .selectAll(\".bubble\")\n          .transition()\n          .attr(\"transform\", (d) => {\n            const [hot, cold] = d.recent(...time);\n            return `translate(${xAxis(hot > cold ? hot : cold) + width / 5 + 25}, ${\n              yAxis(hot > cold ? 1 : 2) + height / 4\n            })`;\n          })\n          .duration(2000);\n        d3.select(d3Container.current)\n          .select(\"#xaxis\")\n          .style(\"display\", \"block\")\n        d3.select(d3Container.current)\n          .selectAll(\".cboundary\")\n          .style(\"stroke-opacity\", 0);\n      }\n    } else if (step === 5) {\n      d3.select(d3Container.current)\n        .selectAll(\".cboundary\")\n        .style(\"stroke-opacity\", 1);\n      d3.select(d3Container.current).select(\"#xaxis\").style(\"display\", \"none\");\n      d3.select(d3Container.current)\n        .selectAll(\".bubble\")\n        .transition()\n        .attr(\"transform\", ({ fips }) => {\n          const county_path = d3.select(`#c${fips}`).datum();\n          return `translate(${map_path.centroid(county_path)})`;\n        })\n        .duration(2000);\n    }\n\n    setCurrentStep(step);\n    //   .duration(3000)\n    //   .transition()\n  }, [step]);\n\n  return (\n    <Container>\n      <Map ref={d3Container} />\n    </Container>\n  );\n};\n\nexport default MapExample;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport MapExample from \"./mapExample\";\nimport { Maps } from \"../../contexts/mapsContext\";\nimport { LisaData } from \"../../contexts/lisaContext\";\n\nconst Container = styled.div`\n    width: 100%;\n`\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 100%;\n\n  & > h1 {\n    margin: 10px 15px 0 15px;\n  }\n\n  & > h2 {\n    margin: 5px 15px 0 15px;\n  }\n`;\n\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\n\nconst Text = styled.p`\n  margin: 5px 15px;\n`;\n\nconst ControlsContainer = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: row;\n`;\n\nconst ListMapContainer = styled.div`\n  display: flex;\n  width: 100%;\n\n  @media (max-width: 770px) {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n`;\n\nconst Button = styled.button``;\n\nconst StepList = styled.ol`\n  max-width: 500px;\n  @media (max-width: 500px) {\n    width: 100%;\n  }\n  padding-right: 15px;\n`\n\ntype Props = {\n  step: number;\n  setLegendStep: (i: number) => void;\n};\n\nexport default function LegendDescription({ step, setLegendStep }: Props) {\n  return (\n    <Maps>\n      <LisaData>\n        <Container>\n          <ListMapContainer>\n              <StepList>\n                <li>\n                  Counties with significant values are represented by dots.\n                </li>\n                <li>\n                  Counties are classified as hotspots (red) or coldspots (blue).\n                </li>\n                <li>\n                  The color intensity of colors is determed by the last week it\n                  had a significant value.\n                </li>\n                <li>\n                  The size of the county circles are deteremined by the total\n                  number of times it was a significant value.\n                </li>\n                <li>These dots are placed over counties on the map.</li>\n              </StepList>\n            <MapExample step={step} />\n          </ListMapContainer>\n          <p>Step {step}</p>\n          <ControlsContainer>\n            <Button onClick={() => setLegendStep(-1)}>Previous</Button>\n            <Button>Play</Button>\n            <Button onClick={() => setLegendStep(1)}>Next</Button>\n          </ControlsContainer>\n        </Container>\n      </LisaData>\n    </Maps>\n  );\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"gatsby\";\n\nimport MapView from \"../components/trivar/mapView\";\nimport Page from \"../components/page\";\nimport LegendDescription from \"../components/trivar/legendDescription\";\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 100%;\n\n  & > h1 {\n    margin: 10px 15px 0 15px;\n  }\n\n  & > h2 {\n    margin: 5px 15px 0 15px;\n  }\n`;\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\nconst Text = styled.p`\n  margin: 5px 15px;\n`;\nconst Trivariate = () => {\n  const width = 380;\n  const height = 250;\n  const mapsTranslate: [number, number] = [width / 2 - 5, height / 2];\n  const mapsScale = 500;\n\n  const MapSettings = {\n    width: width - 10,\n    height,\n    translate: mapsTranslate,\n    scale: mapsScale,\n  };\n\n  const [selectedCounty, setSelectedCounty] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  const [selectedState, setSelectedState] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  const [time, setTime] = useState<[number, number]>([0, 52]);\n\n  const [legendStep, setLegendStep] = useState(1);\n\n  const changeStep = (i: number) => {\n    if (i + legendStep > 5) {\n      // setLegendStep(1);\n    } else if (i + legendStep < 1) {\n      // setLegendStep(5);\n    } else {\n      setLegendStep(legendStep + i);\n    }\n  };\n\n  return (\n    <Page selectedPage=\"Interactive\">\n      <Container>\n        <TextContainer>\n          <h1>Clustering Recency & Consistency</h1>\n        </TextContainer>\n        <LegendDescription step={legendStep} setLegendStep={changeStep} />\n        <TextContainer>\n          <Text>\n            This page provides a single view representation of the{\" \"}\n            <Link to=\"/animated\">animated choropleth maps</Link> by using\n            symbols to show the temporal aspects in a single view. Counties that\n            were either a hot spot or cold spot at least once in 2020 have a\n            circle over them. If the circle is colored blue then the county was\n            a cold spot at some point in time and if it is color red it was a\n            hot spot. The radius of the circle shows the number of times that\n            county was a hot or cold spot in the given period. A circle with a\n            larger radius indicates that it was a hot spot or cold spot more\n            times in the year. A darker color shows the last time the county was\n            a hot spot or cold spot was later in the year while a lighter color\n            means the last time the county was a hot spot or cold spot was\n            earlier in the year.\n          </Text>\n        </TextContainer>\n        <Divider />\n        <MapView\n          MapSettings={MapSettings}\n          selectedCounty={selectedCounty}\n          setSelectedCounty={setSelectedCounty}\n          selectedState={selectedState}\n          setSelectedState={setSelectedState}\n          time={time}\n          setTime={setTime}\n        />\n        <Divider />\n      </Container>\n    </Page>\n  );\n};\n\nexport default Trivariate;\n","import * as d3 from \"d3\"\n\nexport default class MapZoom {\n    active = d3.select(null);\n    path = null\n    g = null\n    width = 0\n    height = 0\n    currId = -1\n\n    constructor(path, g, width, height, id) {\n        this.path = path\n        this.g = g;\n        this.width = width\n        this.height = height\n        this.currId = id\n    }\n\n    /*\n        Zoom in from id\n    */\n    select(id: number) {\n        this.currId = id;\n\n        const clicked = this.g.select(`[stateFips='${id}']`);\n\n        // // this.active.classed(\"active\", false);\n        // // this.active = clicked.classed(\"active\", true);\n\n        let d;\n        clicked.attr('x', (_d, i) => {\n            d = _d\n        })\n\n        const [[x0, y0], [x1, y1]] = this.path.bounds(d);\n\n        const dx = x1 - x0;\n        const dy = y1 - y0;\n        const x = (x0 + x1) / 2;\n        const y = (y0 + y1) / 2;\n\n        // const box = d.node().getBBox()\n\n        // const dx = box.width\n        // const dy = box.height\n        // const x = box.x + box.width / 2\n        // const y = box.y + box.height / 2\n\n        // console.log(x, y, dx, dy)\n\n        const scaleNew = 0.8 / Math.max(dx / this.width, dy / this.height);\n        const translateNew = [this.width / 2 - scaleNew * x, this.height / 2 - scaleNew * y]\n\n        this.g\n            .transition()\n            .duration(650)\n            .attr(\"transform\", `translate(${translateNew}) scale(${scaleNew})`)\n\n        return scaleNew\n    }\n\n    /*\n        On click event handler,\n\n\n        not used, WON'T WORK ANYMORE\n    */\n    clicked(clicked, d) {\n        const stateId = clicked.getAttribute(\"id\")\n        // const states = d3.selectAll(`[id='${stateId}']`)\n\n        if (this.active.node() === clicked) {\n            return this.reset();\n        }\n\n        this.active.classed(\"active\", false);\n        this.active = d3.select(clicked).classed(\"active\", true);\n\n        const [[x0, y0], [x1, y1]] = this.path.bounds(d);\n\n        const dx = x1 - x0;\n        const dy = y1 - y0;\n        const x = (x0 + x1) / 2;\n        const y = (y0 + y1) / 2;\n\n        const scaleNew = 0.7 / Math.max(dx / this.width, dy / this.height);\n        const translateNew = [this.width / 2 - scaleNew * x, this.height / 2 - scaleNew * y]\n\n        this.g\n            .transition()\n            .duration(650)\n            .attr(\"transform\", `translate(${translateNew}) scale(${scaleNew})`)\n\n        return stateId\n    }\n\n    /*\n        Reset map view\n    */\n    reset() {\n        this.currId = \"\"\n        this.active.classed(\"active\", false);\n        this.active = d3.select(null);\n\n        this.g\n            .transition()\n            .duration(500)\n            .attr(\"transform\", `translate(0)`)\n    }\n}"],"sourceRoot":""}